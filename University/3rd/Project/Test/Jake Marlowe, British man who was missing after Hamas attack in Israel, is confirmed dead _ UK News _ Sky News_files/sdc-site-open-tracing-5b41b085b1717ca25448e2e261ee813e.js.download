!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("sdc-site-open-tracing",[],e):"object"==typeof exports?exports["sdc-site-open-tracing"]=e():t["sdc-site-open-tracing"]=e()}(self,function(){return function(){function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var e={"./node_modules/@elastic/apm-rum/dist/bundles/elastic-apm-opentracing.umd.js":function(t,e,n){function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=n.nmd(t);var o,i,s;!function(n,a){"object"===r(e)&&"object"===r(t)?t.exports=a():(i=[],o=a,void 0!==(s="function"==typeof o?o.apply(e,i):o)&&(t.exports=s))}(window,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"===r(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(o,i,function(e){return t[e]}.bind(null,i));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s="./src/opentracing.js")}({"../../node_modules/error-stack-parser/error-stack-parser.js":function(t,e,n){var r,o,i;!function(s,a){"use strict";o=[n("../../node_modules/stackframe/stackframe.js")],r=a,void 0!==(i="function"==typeof r?r.apply(e,o):r)&&(t.exports=i)}(0,function(t){"use strict";function e(t,e,n){if("function"==typeof Array.prototype.map)return t.map(e,n);for(var r=new Array(t.length),o=0;o<t.length;o++)r[o]=e.call(n,t[o]);return r}function n(t,e,n){if("function"==typeof Array.prototype.filter)return t.filter(e,n);for(var r=[],o=0;o<t.length;o++)e.call(n,t[o])&&r.push(t[o]);return r}function r(t,e){if("function"==typeof Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var o=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,s=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(i))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,n=e.exec(t.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(o){return e(n(o.stack.split("\n"),function(t){return!!t.match(i)},this),function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),o=this.extractLocation(n.pop()),i=n.join(" ")||void 0,s=r(["eval","<anonymous>"],o[0])>-1?void 0:o[0];return new t(i,void 0,s,o[1],o[2],e)},this)},parseFFOrSafari:function(r){return e(n(r.stack.split("\n"),function(t){return!t.match(s)},this),function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t(e);var n=e.split("@"),r=this.extractLocation(n.pop()),o=n.join("@")||void 0;return new t(o,void 0,r[0],r[1],r[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),o=[],i=2,s=r.length;i<s;i+=2){var a=n.exec(r[i]);a&&o.push(new t(void 0,void 0,a[2],a[1],void 0,r[i]))}return o},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),o=[],i=0,s=r.length;i<s;i+=2){var a=n.exec(r[i]);a&&o.push(new t(a[3]||void 0,void 0,a[2],a[1],void 0,r[i]))}return o},parseOpera11:function(r){return e(n(r.stack.split("\n"),function(t){return!!t.match(o)&&!t.match(/^Error created at/)},this),function(e){var n,r=e.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(n=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new t(s,a,o[0],o[1],o[2],e)},this)}}})},"../../node_modules/opentracing/lib/constants.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FORMAT_BINARY="binary",e.FORMAT_TEXT_MAP="text_map",e.FORMAT_HTTP_HEADERS="http_headers",e.REFERENCE_CHILD_OF="child_of",e.REFERENCE_FOLLOWS_FROM="follows_from"},"../../node_modules/opentracing/lib/functions.js":function(t,e,n){"use strict";function r(t){return t instanceof a.default&&(t=t.context()),new s.default(i.REFERENCE_CHILD_OF,t)}function o(t){return t instanceof a.default&&(t=t.context()),new s.default(i.REFERENCE_FOLLOWS_FROM,t)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../node_modules/opentracing/lib/constants.js"),s=n("../../node_modules/opentracing/lib/reference.js"),a=n("../../node_modules/opentracing/lib/span.js");e.childOf=r,e.followsFrom=o},"../../node_modules/opentracing/lib/noop.js":function(t,e,n){"use strict";function r(){e.tracer=new s.default,e.span=new o.default,e.spanContext=new i.default}Object.defineProperty(e,"__esModule",{value:!0});var o=n("../../node_modules/opentracing/lib/span.js"),i=n("../../node_modules/opentracing/lib/span_context.js"),s=n("../../node_modules/opentracing/lib/tracer.js");e.tracer=null,e.spanContext=null,e.span=null,e.initialize=r},"../../node_modules/opentracing/lib/reference.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("../../node_modules/opentracing/lib/span.js"),o=function(){function t(t,e){this._type=t,this._referencedContext=e instanceof r.default?e.context():e}return t.prototype.type=function(){return this._type},t.prototype.referencedContext=function(){return this._referencedContext},t}();e.default=o},"../../node_modules/opentracing/lib/span.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("../../node_modules/opentracing/lib/noop.js"),o=function(){function t(){}return t.prototype.context=function(){return this._context()},t.prototype.tracer=function(){return this._tracer()},t.prototype.setOperationName=function(t){return this._setOperationName(t),this},t.prototype.setBaggageItem=function(t,e){return this._setBaggageItem(t,e),this},t.prototype.getBaggageItem=function(t){return this._getBaggageItem(t)},t.prototype.setTag=function(t,e){return this._addTags((n={},n[t]=e,n)),this;var n},t.prototype.addTags=function(t){return this._addTags(t),this},t.prototype.log=function(t,e){return this._log(t,e),this},t.prototype.logEvent=function(t,e){return this._log({event:t,payload:e})},t.prototype.finish=function(t){this._finish(t)},t.prototype._context=function(){return r.spanContext},t.prototype._tracer=function(){return r.tracer},t.prototype._setOperationName=function(t){},t.prototype._setBaggageItem=function(t,e){},t.prototype._getBaggageItem=function(t){},t.prototype._addTags=function(t){},t.prototype._log=function(t,e){},t.prototype._finish=function(t){},t}();e.Span=o,e.default=o},"../../node_modules/opentracing/lib/span_context.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t}();e.SpanContext=r,e.default=r},"../../node_modules/opentracing/lib/tracer.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("../../node_modules/opentracing/lib/functions.js"),o=n("../../node_modules/opentracing/lib/noop.js"),i=n("../../node_modules/opentracing/lib/span.js"),s=function(){function t(){}return t.prototype.startSpan=function(t,e){if(void 0===e&&(e={}),e.childOf){var n=r.childOf(e.childOf);e.references?e.references.push(n):e.references=[n],delete e.childOf}return this._startSpan(t,e)},t.prototype.inject=function(t,e,n){return t instanceof i.default&&(t=t.context()),this._inject(t,e,n)},t.prototype.extract=function(t,e){return this._extract(t,e)},t.prototype._startSpan=function(t,e){return o.span},t.prototype._inject=function(t,e,n){},t.prototype._extract=function(t,e){return o.spanContext},t}();e.Tracer=s,e.default=s},"../../node_modules/promise-polyfill/src/finally.js":function(t,e,n){"use strict";function r(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}n.r(e),e.default=r},"../../node_modules/promise-polyfill/src/index.js":function(t,e,n){"use strict";function o(t){return Boolean(t&&void 0!==t.length)}function i(){}function s(t,e){return function(){t.apply(e,arguments)}}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function c(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,a._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?u:d)(e.promise,t._value);var r;try{r=n(t._value)}catch(t){return void d(e.promise,t)}u(e.promise,r)})}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===r(e)||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void f(t);if("function"==typeof n)return void l(s(n,e),t)}t._state=1,t._value=e,f(t)}catch(e){d(t,e)}}function d(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)c(t,t._deferreds[e]);t._deferreds=null}function p(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,d(e,t))})}catch(t){if(n)return;n=!0,d(e,t)}}n.r(e);var m=n("../../node_modules/promise-polyfill/src/finally.js"),g=setTimeout;a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(i);return c(this,new p(t,e,n)),n},a.prototype.finally=m.default,a.all=function(t){return new a(function(e,n){function i(t,o){try{if(o&&("object"===r(o)||"function"==typeof o)){var c=o.then;if("function"==typeof c)return void c.call(o,function(e){i(t,e)},n)}s[t]=o,0==--a&&e(s)}catch(t){n(t)}}if(!o(t))return n(new TypeError("Promise.all accepts an array"));var s=Array.prototype.slice.call(t);if(0===s.length)return e([]);for(var a=s.length,c=0;c<s.length;c++)i(c,s[c])})},a.resolve=function(t){return t&&"object"===r(t)&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){if(!o(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)a.resolve(t[r]).then(e,n)})},a._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){g(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.default=a},"../../node_modules/stackframe/stackframe.js":function(t,e,n){var r,o,i;!function(n,s){"use strict";o=[],r=s,void 0!==(i="function"==typeof r?r.apply(e,o):r)&&(t.exports=i)}(0,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,n,r,o,i){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}},e})},"../rum-core/dist/es/bootstrap.js":function(t,e,n){"use strict";function r(){return Object(i.isPlatformSupported)()?(Object(s.patchAll)(),o(),a.state.bootstrapTime=Object(i.now)(),c=!0):i.isBrowser&&console.log("[Elastic APM] platform is not supported!"),c}function o(){"hidden"===document.visibilityState&&(a.state.lastHiddenStart=0),window.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(a.state.lastHiddenStart=performance.now())},{capture:!0})}n.r(e),n.d(e,"bootstrap",function(){return r}),n.d(e,"bootstrapPerf",function(){return o});var i=n("../rum-core/dist/es/common/utils.js"),s=n("../rum-core/dist/es/common/patching/index.js"),a=n("../rum-core/dist/es/state.js"),c=!1},"../rum-core/dist/es/common/after-frame.js":function(t,e,n){"use strict";function r(t){var e=function(){clearTimeout(n),cancelAnimationFrame(r),setTimeout(t)},n=setTimeout(e,o),r=requestAnimationFrame(e)}n.r(e),n.d(e,"default",function(){return r});var o=100},"../rum-core/dist/es/common/apm-server.js":function(t,e,n){"use strict";n.r(e);var r=n("../rum-core/dist/es/common/queue.js"),o=n("../rum-core/dist/es/common/throttle.js"),i=n("../rum-core/dist/es/common/ndjson.js"),s=n("../rum-core/dist/es/common/patching/patch-utils.js"),a=n("../rum-core/dist/es/common/truncate.js"),c=n("../rum-core/dist/es/common/constants.js"),u=n("../rum-core/dist/es/common/utils.js"),d=n("../rum-core/dist/es/common/polyfills.js"),f=n("../rum-core/dist/es/common/compress.js"),p=n("../rum-core/dist/es/state.js"),l=function(){function t(t,e){this._configService=t,this._loggingService=e,this.queue=void 0,this.throttleEvents=u.noop}var e=t.prototype;return e.init=function(){var t=this,e=this._configService.get("queueLimit"),n=this._configService.get("flushInterval"),i=this._configService.get("eventsLimit"),s=function(e){var n=t.sendEvents(e);n&&n.catch(function(e){t._loggingService.warn("Failed sending events!",t._constructError(e))})};this.queue=new r.default(s,{queueLimit:e,flushInterval:n}),this.throttleEvents=Object(o.default)(this.queue.add.bind(this.queue),function(){return t._loggingService.warn("Dropped events due to throttling!")},{limit:i,interval:6e4})},e._postJson=function(t,e){var n=this,r={"Content-Type":"application/x-ndjson"};return Object(f.compressPayload)(e,r).catch(function(t){return p.__DEV__&&n._loggingService.debug("Compressing the payload using CompressionStream API failed",t.message),{payload:e,headers:r}}).then(function(e){return n._makeHttpRequest("POST",t,e)}).then(function(t){return t.responseText})},e._constructError=function(t){var e=t.url,n=t.status,r=t.responseText;if(void 0===n)return t;var o=e+" HTTP status: "+n;if(p.__DEV__&&r)try{var i=[],s=JSON.parse(r);s.errors&&s.errors.length>0&&(s.errors.forEach(function(t){return i.push(t.message)}),o+=" "+i.join(","))}catch(t){this._loggingService.debug("Error parsing response from APM server",t)}return new Error(o)},e._makeHttpRequest=function(t,e,n){var r=void 0===n?{}:n,o=r.timeout,i=void 0===o?1e4:o,a=r.payload,c=r.headers;return new d.Promise(function(n,r){var o=new window.XMLHttpRequest;if(o[s.XHR_IGNORE]=!0,o.open(t,e,!0),o.timeout=i,c)for(var u in c)c.hasOwnProperty(u)&&o.setRequestHeader(u,c[u]);o.onreadystatechange=function(){if(4===o.readyState){var t=o.status,i=o.responseText;0===t||t>399&&t<600?r({url:e,status:t,responseText:i}):n(o)}},o.onerror=function(){var t=o.status,n=o.responseText;r({url:e,status:t,responseText:n})},o.send(a)})},e.fetchConfig=function(t,e){var n=this,r=this._configService.get("serverUrl"),o=r+"/config/v1/rum/agents";if(!t)return d.Promise.reject("serviceName is required for fetching central config.");o+="?service.name="+t,e&&(o+="&service.environment="+e);var i=this._configService.getLocalConfig();return i&&(o+="&ifnonematch="+i.etag),this._makeHttpRequest("GET",o,{timeout:5e3}).then(function(t){var e=t.status,r=t.responseText;if(304===e)return i;var o=JSON.parse(r),s=t.getResponseHeader("etag");return s&&(o.etag=s.replace(/["]/g,""),n._configService.setLocalConfig(o)),o}).catch(function(t){var e=n._constructError(t);return d.Promise.reject(e)})},e.createMetaData=function(){var t=this._configService,e={service:{name:t.get("serviceName"),version:t.get("serviceVersion"),agent:{name:"rum-js",version:t.version},language:{name:"javascript"},environment:t.get("environment")},labels:t.get("context.tags")};return Object(a.truncateModel)(a.METADATA_MODEL,e)},e.addError=function(t){var e;this.throttleEvents((e={},e[c.ERRORS]=t,e))},e.addTransaction=function(t){var e;this.throttleEvents((e={},e[c.TRANSACTIONS]=t,e))},e.ndjsonErrors=function(t,e){var n=e?"e":"error";return t.map(function(t){var r;return i.default.stringify((r={},r[n]=e?Object(f.compressError)(t):t,r))})},e.ndjsonMetricsets=function(t){return t.map(function(t){return i.default.stringify({metricset:t})}).join("")},e.ndjsonTransactions=function(t,e){var n=this,r=e?"x":"transaction";return t.map(function(t){var o,s="",a="";return e||(t.spans&&(s=t.spans.map(function(t){return i.default.stringify({span:t})}).join(""),delete t.spans),t.breakdown&&(a=n.ndjsonMetricsets(t.breakdown),delete t.breakdown)),i.default.stringify((o={},o[r]=e?Object(f.compressTransaction)(t):t,o))+s+a})},e.sendEvents=function(t){var e,n;if(0!==t.length){for(var r=[],o=[],s=0;s<t.length;s++){var a=t[s];a[c.TRANSACTIONS]&&r.push(a[c.TRANSACTIONS]),a[c.ERRORS]&&o.push(a[c.ERRORS])}if(0!==r.length||0!==o.length){var u=this._configService,d=(e={},e[c.TRANSACTIONS]=r,e[c.ERRORS]=o,e),p=u.applyFilters(d);if(!p)return void this._loggingService.warn("Dropped payload due to filtering!");var l=u.get("apiVersion"),m=l>2,g=[],h=this.createMetaData(),v=m?"m":"metadata";g.push(i.default.stringify((n={},n[v]=m?Object(f.compressMetadata)(h):h,n))),g=g.concat(this.ndjsonErrors(p[c.ERRORS],m),this.ndjsonTransactions(p[c.TRANSACTIONS],m));var _=g.join(""),E=u.get("serverUrl")+"/intake/v"+l+"/rum/events";return this._postJson(E,_)}}},t}();e.default=l},"../rum-core/dist/es/common/compress.js":function(t,e,n){"use strict";function r(t){return t.map(function(t){return{ap:t.abs_path,f:t.filename,fn:t.function,li:t.lineno,co:t.colno}})}function o(t){return{ts:t.transfer_size,ebs:t.encoded_body_size,dbs:t.decoded_body_size}}function i(t){var e={},n=t.method,r=t.status_code,i=t.url,s=t.response;return e.url=i,n&&(e.mt=n),r&&(e.sc=r),s&&(e.r=o(s)),e}function s(t){if(!t)return null;var e={},n=t.page,r=t.http,s=t.response,a=t.destination,c=t.user,u=t.custom;if(n&&(e.p={rf:n.referer,url:n.url}),r&&(e.h=i(r)),s&&(e.r=o(s)),a){var d=a.service;e.dt={se:{n:d.name,t:d.type,rc:d.resource},ad:a.address,po:a.port}}return c&&(e.u={id:c.id,un:c.username,em:c.email}),u&&(e.cu=u),e}function a(t){if(!t)return null;var e=t.navigationTiming,n=t.agent,r={nt:{}};m.COMPRESSED_NAV_TIMING_MARKS.forEach(function(t,n){var o=m.NAVIGATION_TIMING_MARKS[n];r.nt[t]=e[o]}),r.a={fb:r.nt.rs,di:r.nt.di,dc:r.nt.dc};var o=n.firstContentfulPaint,i=n.largestContentfulPaint;return o&&(r.a.fp=o),i&&(r.a.lp=i),r}function c(t){var e=t.service,n=t.labels,r=e.agent,o=e.language;return{se:{n:e.name,ve:e.version,a:{n:r.name,ve:r.version},la:{n:o.name},en:e.environment},l:n}}function u(t){var e=t.spans.map(function(e){var n={id:e.id,n:e.name,t:e.type,s:e.start,d:e.duration,c:s(e.context),o:e.outcome,sr:e.sample_rate};return e.parent_id!==t.id&&(n.pid=e.parent_id),!0===e.sync&&(n.sy=!0),e.subtype&&(n.su=e.subtype),e.action&&(n.ac=e.action),n}),n={id:t.id,tid:t.trace_id,n:t.name,t:t.type,d:t.duration,c:s(t.context),m:a(t.marks),me:f(t.breakdown),y:e,yc:{sd:e.length},sm:t.sampled,sr:t.sample_rate,o:t.outcome};if(t.experience){var r=t.experience,o=r.cls,i=r.fid,c=r.tbt,u=r.longtask;n.exp={cls:o,fid:i,tbt:c,lt:u}}return n}function d(t){var e=t.exception,n={id:t.id,cl:t.culprit,ex:{mg:e.message,st:r(e.stacktrace),t:t.type},c:s(t.context)},o=t.transaction;return o&&(n.tid=t.trace_id,n.pid=t.parent_id,n.xid=t.transaction_id,n.x={t:o.type,sm:o.sampled}),n}function f(t){return t.map(function(t){var e=t.span,n=t.samples;return null!=e?{y:{t:e.type},sa:{ysc:{v:n["span.self_time.count"].value},yss:{v:n["span.self_time.sum.us"].value}}}:{sa:{xdc:{v:n["transaction.duration.count"].value},xds:{v:n["transaction.duration.sum.us"].value},xbc:{v:n["transaction.breakdown.count"].value}}}})}function p(t,e,n){void 0===n&&(n="gzip");var r="function"==typeof CompressionStream;return new l.Promise(function(o){if(!r)return o({payload:t,headers:e});var i=new Blob([t]).stream(),s=i.pipeThrough(new CompressionStream(n));return new Response(s).blob().then(function(t){return e["Content-Encoding"]=n,o({payload:t,headers:e})})})}n.r(e),n.d(e,"compressMetadata",function(){return c}),n.d(e,"compressTransaction",function(){return u}),n.d(e,"compressError",function(){return d}),n.d(e,"compressMetricsets",function(){return f}),n.d(e,"compressPayload",function(){return p});var l=n("../rum-core/dist/es/common/polyfills.js"),m=n("../rum-core/dist/es/performance-monitoring/capture-navigation.js")},"../rum-core/dist/es/common/config-service.js":function(t,e,n){"use strict";function r(){return o(Object(i.getCurrentScript)())}function o(t){if(!t)return{};for(var e={},n=/^data-([\w-]+)$/,r=t.attributes,o=0;o<r.length;o++){var i=r[o];if(n.test(i.nodeName)){e[i.nodeName.match(n)[1].split("-").map(function(t,e){return e>0?t.charAt(0).toUpperCase()+t.substring(1):t}).join("")]=i.value||i.nodeValue}}return e}n.r(e);var i=n("../rum-core/dist/es/common/utils.js"),s=n("../rum-core/dist/es/common/event-handler.js"),a=n("../rum-core/dist/es/common/constants.js"),c=function(){function t(){this.config={serviceName:"",serviceVersion:"",environment:"",serverUrl:"http://localhost:8200",active:!0,instrument:!0,disableInstrumentations:[],logLevel:"warn",breakdownMetrics:!1,ignoreTransactions:[],eventsLimit:80,queueLimit:-1,flushInterval:500,distributedTracing:!0,distributedTracingOrigins:[],distributedTracingHeaderName:"traceparent",pageLoadTraceId:"",pageLoadSpanId:"",pageLoadSampled:!1,pageLoadTransactionName:"",propagateTracestate:!1,transactionSampleRate:1,centralConfig:!1,monitorLongtasks:!0,apiVersion:2,context:{}},this.events=new s.default,this.filters=[],this.version=""}var e=t.prototype;return e.init=function(){var t=r();this.setConfig(t)},e.setVersion=function(t){this.version=t},e.addFilter=function(t){if("function"!=typeof t)throw new Error("Argument to must be function");this.filters.push(t)},e.applyFilters=function(t){for(var e=0;e<this.filters.length;e++)if(!(t=this.filters[e](t)))return;return t},e.get=function(t){return t.split(".").reduce(function(t,e){return t&&t[e]},this.config)},e.setUserContext=function(t){void 0===t&&(t={});var e={},n=t,r=n.id,o=n.username,s=n.email;"number"!=typeof r&&"string"!=typeof r||(e.id=r),"string"==typeof o&&(e.username=o),"string"==typeof s&&(e.email=s),this.config.context.user=Object(i.extend)(this.config.context.user||{},e)},e.setCustomContext=function(t){void 0===t&&(t={}),this.config.context.custom=Object(i.extend)(this.config.context.custom||{},t)},e.addLabels=function(t){var e=this;this.config.context.tags||(this.config.context.tags={}),Object.keys(t).forEach(function(n){return Object(i.setLabel)(n,t[n],e.config.context.tags)})},e.setConfig=function(t){void 0===t&&(t={});var e=t,n=e.transactionSampleRate,r=e.serverUrl;r&&(t.serverUrl=r.replace(/\/+$/,"")),Object(i.isUndefined)(n)||(n<1e-4&&n>0&&(n=1e-4),t.transactionSampleRate=Math.round(1e4*n)/1e4),Object(i.merge)(this.config,t),this.events.send(a.CONFIG_CHANGE,[this.config])},e.validate=function(t){void 0===t&&(t={});var e=["serviceName","serverUrl"],n={missing:[],invalid:[]};Object.keys(t).forEach(function(r){-1===e.indexOf(r)||t[r]||n.missing.push(r)}),t.serviceName&&!/^[a-zA-Z0-9 _-]+$/.test(t.serviceName)&&n.invalid.push({key:"serviceName",value:t.serviceName,allowed:"a-z, A-Z, 0-9, _, -, <space>"});var r=t.transactionSampleRate;return void 0!==r&&("number"!=typeof r||isNaN(r)||r<0||r>1)&&n.invalid.push({key:"transactionSampleRate",value:r,allowed:"Number between 0 and 1"}),n},e.getLocalConfig=function(){var t=sessionStorage.getItem(a.LOCAL_CONFIG_KEY);if(t)return JSON.parse(t)},e.setLocalConfig=function(t){t&&sessionStorage.setItem(a.LOCAL_CONFIG_KEY,JSON.stringify(t))},t}();e.default=c},"../rum-core/dist/es/common/constants.js":function(t,e,n){"use strict";n.r(e),n.d(e,"SCHEDULE",function(){return r}),n.d(e,"INVOKE",function(){return o}),n.d(e,"ADD_EVENT_LISTENER_STR",function(){return i}),n.d(e,"REMOVE_EVENT_LISTENER_STR",function(){return s}),n.d(e,"RESOURCE_INITIATOR_TYPES",function(){return a}),n.d(e,"REUSABILITY_THRESHOLD",function(){return c}),n.d(e,"MAX_SPAN_DURATION",function(){return u}),n.d(e,"PAGE_LOAD",function(){return d}),n.d(e,"ROUTE_CHANGE",function(){return f}),n.d(e,"NAME_UNKNOWN",function(){return h}),n.d(e,"TYPE_CUSTOM",function(){return p}),n.d(e,"USER_TIMING_THRESHOLD",function(){return y}),n.d(e,"TRANSACTION_START",function(){return T}),n.d(e,"TRANSACTION_END",function(){return S}),n.d(e,"CONFIG_CHANGE",function(){return b}),n.d(e,"XMLHTTPREQUEST",function(){return O}),n.d(e,"FETCH",function(){return j}),n.d(e,"HISTORY",function(){return R}),n.d(e,"EVENT_TARGET",function(){return N}),n.d(e,"ERROR",function(){return I}),n.d(e,"BEFORE_EVENT",function(){return w}),n.d(e,"AFTER_EVENT",function(){return C}),n.d(e,"LOCAL_CONFIG_KEY",function(){return A}),n.d(e,"HTTP_REQUEST_TYPE",function(){return m}),n.d(e,"LONG_TASK",function(){return x}),n.d(e,"PAINT",function(){return L}),n.d(e,"MEASURE",function(){return M}),n.d(e,"NAVIGATION",function(){return P}),n.d(e,"RESOURCE",function(){return k}),n.d(e,"FIRST_CONTENTFUL_PAINT",function(){return F}),n.d(e,"LARGEST_CONTENTFUL_PAINT",function(){return D}),n.d(e,"KEYWORD_LIMIT",function(){return X}),n.d(e,"TEMPORARY_TYPE",function(){return g}),n.d(e,"USER_INTERACTION",function(){return l}),n.d(e,"TRANSACTION_TYPE_ORDER",function(){return v}),n.d(e,"ERRORS",function(){return G}),n.d(e,"TRANSACTIONS",function(){return U}),n.d(e,"CONFIG_SERVICE",function(){return B}),n.d(e,"LOGGING_SERVICE",function(){return Y}),n.d(e,"APM_SERVER",function(){return K}),n.d(e,"TRUNCATED_TYPE",function(){return q}),n.d(e,"FIRST_INPUT",function(){return H}),n.d(e,"LAYOUT_SHIFT",function(){return V}),n.d(e,"OUTCOME_SUCCESS",function(){return _}),n.d(e,"OUTCOME_FAILURE",function(){return E});var r="schedule",o="invoke",i="addEventListener",s="removeEventListener",a=["link","css","script","img","xmlhttprequest","fetch","beacon","iframe"],c=5e3,u=3e5,d="page-load",f="route-change",p="custom",l="user-interaction",m="http-request",g="temporary",h="Unknown",v=[d,f,l,m,p,g],_="success",E="failure",y=60,T="transaction:start",S="transaction:end",b="config:change",O="xmlhttprequest",j="fetch",R="history",N="eventtarget",I="error",w=":before",C=":after",A="elastic_apm_config",x="longtask",L="paint",M="measure",P="navigation",k="resource",F="first-contentful-paint",D="largest-contentful-paint",H="first-input",V="layout-shift",G="errors",U="transactions",B="ConfigService",Y="LoggingService",K="ApmServer",q=".truncated",X=1024},"../rum-core/dist/es/common/context.js":function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}function o(t,e){return""===t&&(t="http:"===e?"80":"https:"===e?"443":""),t}function i(t){var e=t.transferSize,n=t.encodedBodySize,r=t.decodedBodySize,o=t.serverTiming,i={transfer_size:e,encoded_body_size:n,decoded_body_size:r},s=Object(g.getServerTimingInfo)(o);return s&&(i.headers={"server-timing":s}),i}function s(t,e){var n=t.port,r=t.protocol,i=t.hostname,s=t.host,a=o(n,r),c=i.charCodeAt(0)===h&&i.charCodeAt(i.length-1)===v,u=i;return c&&(u=i.slice(1,-1)),{service:{name:r+"//"+s,resource:i+":"+a,type:e},address:u,port:Number(a)}}function a(t){var e=t.entry,n=t.url,r=new l.Url(n),o=s(r,E);return{http:{url:n,response:i(e)},destination:o}}function c(t){var e,n=t.url,r=t.method,o=t.target,i=t.response,a=new l.Url(n),c=s(a,_),u={http:{method:r,url:a.href},destination:c};return o&&void 0!==o.status?e=o.status:i&&(e=i.status),u.http.status_code=e,u}function u(t){var e=t.url;return{destination:s(new l.Url(e),y)}}function d(){return{page:{referer:document.referrer,url:location.href}}}function f(t,e){if(e){var n,r=t.type;switch(r){case _:n=c(e);break;case E:n=a(e);break;case y:n=u(e)}t.addContext(n)}}function p(t,e){var n=void 0===e?{}:e,o=(n.tags,r(n,["tags"])),s=d(),a={};if(t.type===m.PAGE_LOAD&&Object(g.isPerfTimelineSupported)()){var c=g.PERF.getEntriesByType(m.NAVIGATION);c&&c.length>0&&(a={response:i(c[0])})}t.addContext(s,a,o)}n.r(e),n.d(e,"getPageContext",function(){return d}),n.d(e,"addSpanContext",function(){return f}),n.d(e,"addTransactionContext",function(){return p});var l=n("../rum-core/dist/es/common/url.js"),m=n("../rum-core/dist/es/common/constants.js"),g=n("../rum-core/dist/es/common/utils.js"),h=91,v=93,_="external",E="resource",y="hard-navigation"},"../rum-core/dist/es/common/event-handler.js":function(t,e,n){"use strict";n.r(e);var r=n("../rum-core/dist/es/common/constants.js"),o=function(){function t(){this.observers={}}var e=t.prototype;return e.observe=function(t,e){var n=this;if("function"==typeof e)return this.observers[t]||(this.observers[t]=[]),this.observers[t].push(e),function(){var r=n.observers[t].indexOf(e);r>-1&&n.observers[t].splice(r,1)}},e.sendOnly=function(t,e){var n=this.observers[t];n&&n.forEach(function(t){try{t.apply(void 0,e)}catch(t){console.log(t,t.stack)}})},e.send=function(t,e){this.sendOnly(t+r.BEFORE_EVENT,e),this.sendOnly(t,e),this.sendOnly(t+r.AFTER_EVENT,e)},t}();e.default=o},"../rum-core/dist/es/common/instrument.js":function(t,e,n){"use strict";function r(t,e){var n,r=(n={},n[o.XMLHTTPREQUEST]=!1,n[o.FETCH]=!1,n[o.HISTORY]=!1,n[o.PAGE_LOAD]=!1,n[o.ERROR]=!1,n[o.EVENT_TARGET]=!1,n);return t?(Object.keys(r).forEach(function(t){-1===e.indexOf(t)&&(r[t]=!0)}),r):r}n.r(e),n.d(e,"getInstrumentationFlags",function(){return r});var o=n("../rum-core/dist/es/common/constants.js")},"../rum-core/dist/es/common/logging-service.js":function(t,e,n){"use strict";n.r(e);var r=n("../rum-core/dist/es/common/utils.js"),o=function(){function t(t){void 0===t&&(t={}),this.levels=["trace","debug","info","warn","error"],this.level=t.level||"warn",
this.prefix=t.prefix||"",this.resetLogMethods()}var e=t.prototype;return e.shouldLog=function(t){return this.levels.indexOf(t)>=this.levels.indexOf(this.level)},e.setLevel=function(t){t!==this.level&&(this.level=t,this.resetLogMethods())},e.resetLogMethods=function(){var t=this;this.levels.forEach(function(e){function n(){var t=e;"trace"!==e&&"debug"!==e||(t="info");var n=arguments;if(n[0]=this.prefix+n[0],console){var r=console[t]||console.log;"function"==typeof r&&r.apply(console,n)}}t[e]=t.shouldLog(e)?n:r.noop})},t}();e.default=o},"../rum-core/dist/es/common/ndjson.js":function(t,e,n){"use strict";n.r(e);var r=function(){function t(){}return t.stringify=function(t){return JSON.stringify(t)+"\n"},t}();e.default=r},"../rum-core/dist/es/common/patching/event-target-patch.js":function(t,e,n){"use strict";function r(t,e,n){return t instanceof Element&&a.indexOf(e)>=0&&"function"==typeof n}function o(t){function e(t,e,n,r){for(var o=0;o<t.length;o++){var i=t[o];if(i.eventType===e&&i.listenerFn===n&&i.capture===r)return o}return-1}function n(t){return"boolean"==typeof t?t:!!t&&!!t.capture}function o(r,o,s,a){function u(){t(i.SCHEDULE,m);var e;try{e=s.apply(this,arguments)}finally{t(i.INVOKE,m)}return e}var d=c[o];if(!d)return s;var f=r[d],p=n(a);if(f){var l=e(f,o,s,p);if(-1!==l){return f[l].wrappingFn}}else f=r[d]=[];var m={source:i.EVENT_TARGET,target:r,eventType:o,listenerFn:s,capture:p,wrappingFn:u};return f.push(m),u}function s(t,r,o,i){var s=c[r],a=t[s];if(a){var u=n(i),d=e(a,r,o,u);if(-1!==d){var f=a[d];return a.splice(d,1),0===a.length&&(t[s]=void 0),f.wrappingFn}}return o}if(window.EventTarget){var a=window.EventTarget.prototype,u=a[i.ADD_EVENT_LISTENER_STR],d=a[i.REMOVE_EVENT_LISTENER_STR];a[i.ADD_EVENT_LISTENER_STR]=function(t,e,n){var i=this;if(!r(i,t,e))return u.apply(i,arguments);var s=o(i,t,e,n),a=Array.prototype.slice.call(arguments);return a[1]=s,u.apply(i,a)},a[i.REMOVE_EVENT_LISTENER_STR]=function(t,e,n){var o=this;if(!r(o,t,e))return d.apply(o,arguments);var i=s(o,t,e,n),a=Array.prototype.slice.call(arguments);return a[1]=i,d.apply(o,a)}}}n.r(e),n.d(e,"patchEventTarget",function(){return o});for(var i=n("../rum-core/dist/es/common/constants.js"),s=n("../rum-core/dist/es/common/patching/patch-utils.js"),a=["click"],c={},u=0;u<a.length;u++){var d=a[u];c[d]=Object(s.apmSymbol)(d)}},"../rum-core/dist/es/common/patching/fetch-patch.js":function(t,e,n){"use strict";function r(t){function e(e){e.state=s.SCHEDULE,t(s.SCHEDULE,e)}function n(e){e.state=s.INVOKE,t(s.INVOKE,e)}if(window.fetch&&window.Request){var r=window.fetch;window.fetch=function(t,c){var u,d,f=this,p=arguments;if("string"==typeof t)u=new Request(t,c),d=t;else{if(!t)return r.apply(f,p);u=t,d=u.url}var l={source:s.FETCH,state:"",type:"macroTask",data:{target:u,method:u.method,url:d,aborted:!1}};return new o.Promise(function(t,o){i.globalState.fetchInProgress=!0,e(l);var s;try{s=r.apply(f,[u])}catch(t){return o(t),l.data.error=t,n(l),void(i.globalState.fetchInProgress=!1)}s.then(function(e){t(e),Object(a.scheduleMicroTask)(function(){l.data.response=e,n(l)})},function(t){o(t),Object(a.scheduleMicroTask)(function(){l.data.error=t,n(l)})}),i.globalState.fetchInProgress=!1})}}}n.r(e),n.d(e,"patchFetch",function(){return r});var o=n("../rum-core/dist/es/common/polyfills.js"),i=n("../rum-core/dist/es/common/patching/patch-utils.js"),s=n("../rum-core/dist/es/common/constants.js"),a=n("../rum-core/dist/es/common/utils.js")},"../rum-core/dist/es/common/patching/history-patch.js":function(t,e,n){"use strict";function r(t){if(window.history){var e=history.pushState;"function"==typeof e&&(history.pushState=function(n,r,i){var s={source:o.HISTORY,data:{state:n,title:r,url:i}};t(o.INVOKE,s),e.apply(this,arguments)})}}n.r(e),n.d(e,"patchHistory",function(){return r});var o=n("../rum-core/dist/es/common/constants.js")},"../rum-core/dist/es/common/patching/index.js":function(t,e,n){"use strict";function r(){return f||(f=!0,Object(o.patchXMLHttpRequest)(function(t,e){d.send(u.XMLHTTPREQUEST,[t,e])}),Object(i.patchFetch)(function(t,e){d.send(u.FETCH,[t,e])}),Object(s.patchHistory)(function(t,e){d.send(u.HISTORY,[t,e])}),Object(a.patchEventTarget)(function(t,e){d.send(u.EVENT_TARGET,[t,e])})),d}n.r(e),n.d(e,"patchAll",function(){return r}),n.d(e,"patchEventHandler",function(){return d});var o=n("../rum-core/dist/es/common/patching/xhr-patch.js"),i=n("../rum-core/dist/es/common/patching/fetch-patch.js"),s=n("../rum-core/dist/es/common/patching/history-patch.js"),a=n("../rum-core/dist/es/common/patching/event-target-patch.js"),c=n("../rum-core/dist/es/common/event-handler.js"),u=n("../rum-core/dist/es/common/constants.js"),d=new c.default,f=!1},"../rum-core/dist/es/common/patching/patch-utils.js":function(t,e,n){"use strict";function r(t){return"__apm_symbol__"+t}function o(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}function i(t,e){t[r("OriginalDelegate")]=e}function s(t,e,n){for(var s=t;s&&!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);!s&&t[e]&&(s=t);var a,c=r(e);if(s&&!(a=s[c])){a=s[c]=s[e];if(o(s&&Object.getOwnPropertyDescriptor(s,e))){var u=n(a,c,e);s[e]=function(){return u(this,arguments)},i(s[e],a)}}return a}n.r(e),n.d(e,"globalState",function(){return a}),n.d(e,"apmSymbol",function(){return r}),n.d(e,"patchMethod",function(){return s}),n.d(e,"XHR_IGNORE",function(){return c}),n.d(e,"XHR_SYNC",function(){return u}),n.d(e,"XHR_URL",function(){return d}),n.d(e,"XHR_METHOD",function(){return f});var a={fetchInProgress:!1},c=r("xhrIgnore"),u=r("xhrSync"),d=r("xhrURL"),f=r("xhrMethod")},"../rum-core/dist/es/common/patching/xhr-patch.js":function(t,e,n){"use strict";function r(t){function e(e,n){e.state!==i.INVOKE&&(e.state=i.INVOKE,e.data.status=n,t(i.INVOKE,e))}function n(n){function r(t){o[i.ADD_EVENT_LISTENER_STR](t,function(t){var r=t.type;if(r===s)4===o.readyState&&0!==o.status&&e(n,"success");else{e(n,r===a?"success":r)}})}if(n.state!==i.SCHEDULE){n.state=i.SCHEDULE,t(i.SCHEDULE,n);var o=n.data.target;r(s),r(a),r(u),r(c),r(d)}}var r=XMLHttpRequest.prototype;if(r&&r[i.ADD_EVENT_LISTENER_STR])var s="readystatechange",a="load",c="error",u="timeout",d="abort",f=Object(o.patchMethod)(r,"open",function(){return function(t,e){return t[o.XHR_IGNORE]||(t[o.XHR_METHOD]=e[0],t[o.XHR_URL]=e[1],t[o.XHR_SYNC]=!1===e[2]),f.apply(t,e)}}),p=Object(o.patchMethod)(r,"send",function(){return function(t,r){if(t[o.XHR_IGNORE])return p.apply(t,r);var s={source:i.XMLHTTPREQUEST,state:"",type:"macroTask",data:{target:t,method:t[o.XHR_METHOD],sync:t[o.XHR_SYNC],url:t[o.XHR_URL],status:""}};try{return n(s),p.apply(t,r)}catch(t){throw e(s,c),t}}})}n.r(e),n.d(e,"patchXMLHttpRequest",function(){return r});var o=n("../rum-core/dist/es/common/patching/patch-utils.js"),i=n("../rum-core/dist/es/common/constants.js")},"../rum-core/dist/es/common/polyfills.js":function(t,e,n){"use strict";n.r(e),n.d(e,"Promise",function(){return s});var r=n("../../node_modules/promise-polyfill/src/index.js"),o=n("../rum-core/dist/es/common/utils.js"),i={};o.isBrowser?i=window:"undefined"!=typeof self&&(i=self);var s="Promise"in i?i.Promise:r.default},"../rum-core/dist/es/common/queue.js":function(t,e,n){"use strict";n.r(e);var r=function(){function t(t,e){void 0===e&&(e={}),this.onFlush=t,this.items=[],this.queueLimit=e.queueLimit||-1,this.flushInterval=e.flushInterval||0,this.timeoutId=void 0}var e=t.prototype;return e._setTimer=function(){var t=this;this.timeoutId=setTimeout(function(){return t.flush()},this.flushInterval)},e._clear=function(){void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.items=[]},e.flush=function(){this.onFlush(this.items),this._clear()},e.add=function(t){this.items.push(t),-1!==this.queueLimit&&this.items.length>=this.queueLimit?this.flush():void 0===this.timeoutId&&this._setTimer()},t}();e.default=r},"../rum-core/dist/es/common/service-factory.js":function(t,e,n){"use strict";n.r(e),n.d(e,"serviceCreators",function(){return u}),n.d(e,"ServiceFactory",function(){return d});var r,o=n("../rum-core/dist/es/common/apm-server.js"),i=n("../rum-core/dist/es/common/config-service.js"),s=n("../rum-core/dist/es/common/logging-service.js"),a=n("../rum-core/dist/es/common/constants.js"),c=n("../rum-core/dist/es/state.js"),u=(r={},r[a.CONFIG_SERVICE]=function(){return new i.default},r[a.LOGGING_SERVICE]=function(){return new s.default({prefix:"[Elastic APM] "})},r[a.APM_SERVER]=function(t){var e=t.getService([a.CONFIG_SERVICE,a.LOGGING_SERVICE]),n=e[0],r=e[1];return new o.default(n,r)},r),d=function(){function t(){this.instances={},this.initialized=!1}var e=t.prototype;return e.init=function(){if(!this.initialized){this.initialized=!0;var t=this.getService(a.CONFIG_SERVICE);t.init();var e=this.getService([a.LOGGING_SERVICE,a.APM_SERVER]),n=e[0],r=e[1];t.events.observe(a.CONFIG_CHANGE,function(){var e=t.get("logLevel");n.setLevel(e)}),r.init()}},e.getService=function(t){var e=this;return"string"==typeof t?(this.instances[t]||("function"==typeof u[t]?this.instances[t]=u[t](this):c.__DEV__&&console.log("Cannot get service, No creator for: "+t)),this.instances[t]):Array.isArray(t)?t.map(function(t){return e.getService(t)}):void 0},t}()},"../rum-core/dist/es/common/throttle.js":function(t,e,n){"use strict";function r(t,e,n){var r,o=this,i=n.limit,s=n.interval,a=0;return function(){return a++,void 0===r&&(r=setTimeout(function(){a=0,r=void 0},s)),a>i&&"function"==typeof e?e.apply(o,arguments):t.apply(o,arguments)}}n.r(e),n.d(e,"default",function(){return r})},"../rum-core/dist/es/common/truncate.js":function(t,e,n){"use strict";function r(t,e,n,r){return void 0===e&&(e=a.KEYWORD_LIMIT),void 0===n&&(n=!1),void 0===r&&(r="N/A"),n&&o(t)&&(t=r),"string"==typeof t?t.substring(0,e):t}function o(t){return null==t||""===t||void 0===t}function i(t,e,n){var i=r(t[e],n[0],n[1]);if(o(i))return void delete t[e];t[e]=i}function s(t,e,n){void 0===t&&(t={}),void 0===n&&(n=e);for(var r=Object.keys(t),o=[],a=0;a<r.length;a++)!function(a){var c=r[a],u=!0===t[c]?o:t[c];Array.isArray(u)?"*"===c?Object.keys(n).forEach(function(t){return i(n,t,u)}):i(n,c,u):s(u,e,n[c])}(a);return e}n.r(e),n.d(e,"truncate",function(){return r}),n.d(e,"truncateModel",function(){return s}),n.d(e,"SPAN_MODEL",function(){return p}),n.d(e,"TRANSACTION_MODEL",function(){return l}),n.d(e,"ERROR_MODEL",function(){return m}),n.d(e,"METADATA_MODEL",function(){return c}),n.d(e,"RESPONSE_MODEL",function(){return u});var a=n("../rum-core/dist/es/common/constants.js"),c={service:{name:[a.KEYWORD_LIMIT,!0],version:!0,agent:{version:[a.KEYWORD_LIMIT,!0]},environment:!0},labels:{"*":!0}},u={"*":!0,headers:{"*":!0}},d={address:[a.KEYWORD_LIMIT],service:{"*":[a.KEYWORD_LIMIT,!0]}},f={user:{id:!0,email:!0,username:!0},tags:{"*":!0},http:{response:u},destination:d,response:u},p={name:[a.KEYWORD_LIMIT,!0],type:[a.KEYWORD_LIMIT,!0],id:[a.KEYWORD_LIMIT,!0],trace_id:[a.KEYWORD_LIMIT,!0],parent_id:[a.KEYWORD_LIMIT,!0],transaction_id:[a.KEYWORD_LIMIT,!0],subtype:!0,action:!0,context:f},l={name:!0,parent_id:!0,type:[a.KEYWORD_LIMIT,!0],id:[a.KEYWORD_LIMIT,!0],trace_id:[a.KEYWORD_LIMIT,!0],span_count:{started:[a.KEYWORD_LIMIT,!0]},context:f},m={id:[a.KEYWORD_LIMIT,!0],trace_id:!0,transaction_id:!0,parent_id:!0,culprit:!0,exception:{type:!0},transaction:{type:!0},context:f}},"../rum-core/dist/es/common/url.js":function(t,e,n){"use strict";function r(t,e){switch(e){case"http:":return"80"===t;case"https:":return"443"===t}return!0}function o(t,e){void 0===e&&(e=2);for(var n=new c(t),r=n.query,o=n.path,i=o.substring(1).split("/"),s=/\W|_/g,a=/[0-9]/g,u=/[a-z]/g,d=/[A-Z]/g,f=[],p=!1,l=0;l<i.length;l++){var m=i[l];if(p||l>e-1){m&&f.push("*");break}if((m.match(s)||[]).length>=2)f.push(":id"),p=!0;else{var g=(m.match(a)||[]).length;if(g>3||m.length>3&&g/m.length>=.3)f.push(":id"),p=!0;else{var h=(m.match(d)||[]).length,v=(m.match(u)||[]).length,_=v/m.length,E=h/m.length;m.length>5&&(E>.3&&E<.6||_>.3&&_<.6)?(f.push(":id"),p=!0):m&&f.push(m)}}}return"/"+(f.length>=2?f.join("/"):f.join(""))+(r?"?{query}":"")}n.r(e),n.d(e,"Url",function(){return c}),n.d(e,"slugifyUrl",function(){return o});var i=n("../rum-core/dist/es/common/utils.js"),s=[["#","hash"],["?","query"],["/","path"],["@","auth",1],[NaN,"host",void 0,1]],a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,c=function(){function t(t){var e=this.extractProtocol(t||""),n=e.protocol,o=e.address,i=e.slashes,a=!n&&!i,c=this.getLocation(),u=s.slice();o=o.replace("\\","/"),i||(u[2]=[NaN,"path"]);for(var d,f=0;f<u.length;f++){var p=u[f],l=p[0],m=p[1];if("string"==typeof l){if(~(d=o.indexOf(l))){var g=p[2];if(g){var h=o.lastIndexOf(l);d=Math.max(d,h),this[m]=o.slice(0,d),o=o.slice(d+g)}else this[m]=o.slice(d),o=o.slice(0,d)}}else this[m]=o,o="";this[m]=this[m]||(a&&p[3]?c[m]||"":""),p[3]&&(this[m]=this[m].toLowerCase())}if(a&&"/"!==this.path.charAt(0)&&(this.path="/"+this.path),this.relative=a,this.protocol=n||c.protocol,this.hostname=this.host,this.port="",/:\d+$/.test(this.host)){var v=this.host.split(":"),_=v.pop(),E=v.join(":");r(_,this.protocol)?this.host=E:this.port=_,this.hostname=E}this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString()}var e=t.prototype;return e.toString=function(){var t=this.protocol;if(t+="//",this.auth){var e=this.auth.split(":");t+=(e[0]?"[REDACTED]":"")+(e[1]?":[REDACTED]":"")+"@"}return t+=this.host,t+=this.path,t+=this.query,t+=this.hash},e.getLocation=function(){var t={};return i.isBrowser&&(t=window),t.location},e.extractProtocol=function(t){var e=a.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],address:e[3]}},t}()},"../rum-core/dist/es/common/utils.js":function(t,e,n){"use strict";function o(){return"withCredentials"in new window.XMLHttpRequest}function i(t){for(var e=[],n=0;n<t.length;n++)e.push(B[t[n]]);return e.join("")}function s(){return"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues(K):"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues?msCrypto.getRandomValues(K):K}function a(t){return i(s()).substr(0,t)}function c(t){if(t&&t.traceId&&t.id&&t.parentId){var e=t.sampled?"01":"00",n=t.sampled?t.id:t.parentId;return"00-"+t.traceId+"-"+n+"-"+e}}function u(t){var e=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})$/.exec(t);if(e){var n=e[4],r="00"!==n;return{traceId:e[2],id:e[3],sampled:r}}}function d(t){return/^[\da-f]{2}-[\da-f]{32}-[\da-f]{16}-[\da-f]{2}$/.test(t)&&"00000000000000000000000000000000"!==t.slice(3,35)&&"0000000000000000"!==t.slice(36,52)}function f(t){var e=t.sampleRate;if(!("number"!=typeof e||String(e).length>256)){return"es=s:"+e}}function p(t,e,n){"function"==typeof t.setRequestHeader?t.setRequestHeader(e,n):t.headers&&"function"==typeof t.headers.append?t.headers.append(e,n):t[e]=n}function l(t,e){var n=!1;return"string"==typeof e?n=t===e:Array.isArray(e)&&e.forEach(function(e){n||(n=l(t,e))}),n}function m(){return G&&"function"==typeof Set&&"function"==typeof JSON.stringify&&U&&"function"==typeof U.now&&o()}function g(t,e,n){if(n&&t){var o=w(t),i=r(e);return void 0!=e&&"boolean"!==i&&"number"!==i&&(e=String(e)),n[o]=e,n}}function h(t){void 0===t&&(t=[]);for(var e=[],n=0;n<t.length;n++){var r=t[n],o=r.name,i=r.duration,s=r.description,a=o;s&&(a+=";desc="+s),i&&(a+=";dur="+i),e.push(a)}return e.join(", ")}function v(){return U.timing.fetchStart}function _(t){return t&&t.split("?")[0]}function E(t){return null!==t&&"object"===r(t)}function y(t){return"function"==typeof t}function T(t,e,n){for(var r=0,o=e.length;r<o;++r){var i=e[r];if(E(i)||y(i))for(var s=Object.keys(i),a=0,c=s.length;a<c;a++){var u=s[a],d=i[u];n&&E(d)?(E(t[u])||(t[u]=Array.isArray(d)?[]:{}),T(t[u],[d],!1)):t[u]=d}}return t}function S(){if("undefined"!=typeof document)for(var t=document.getElementsByTagName("script"),e=0,n=t.length;e<n;e++){var r=t[e];if(r.src.indexOf("elastic")>0)return r}}function b(){if("undefined"!=typeof document){var t=document.currentScript;return t||S()}}function O(t){return T(t,V.call(arguments,1),!1)}function j(t){return T(t,V.call(arguments,1),!0)}function R(t){return void 0===t}function N(){}function I(t,e,n){if(null==t)throw new TypeError("array is null or not defined");var r=Object(t),o=r.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=0;i<o;){var s=r[i];if(e.call(n,s,i,r))return s;i++}}function w(t){return t.replace(/[.*"]/g,"_")}function C(t){for(var e=null,n=0;n<t.length;n++){var r=t[n];-1===String(r.type).indexOf("external")&&(!e||e._end<r._end)&&(e=r)}return e}function A(t){for(var e=t[0],n=1;n<t.length;n++){var r=t[n];e._start>r._start&&(e=r)}return e}function x(){return U.now()}function L(t){return"number"==typeof t&&t>=0?t:x()}function M(t,e){return R(e)||R(t)?null:parseInt(e-t)}function P(t){setTimeout(t,0)}function k(t){H.Promise.resolve().then(t)}function F(){return"function"==typeof U.getEntriesByType}function D(t){return"undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.indexOf(t)>=0}n.r(e),n.d(e,"extend",function(){return O}),n.d(e,"merge",function(){return j}),n.d(e,"isUndefined",function(){return R}),n.d(e,"noop",function(){return N}),n.d(e,"baseExtend",function(){return T}),n.d(e,"bytesToHex",function(){return i}),n.d(e,"isCORSSupported",function(){return o}),n.d(e,"isObject",function(){return E}),n.d(e,"isFunction",function(){return y}),n.d(e,"isPlatformSupported",function(){return m}),n.d(e,"isDtHeaderValid",function(){return d}),n.d(e,"parseDtHeaderValue",function(){return u}),n.d(e,"getServerTimingInfo",function(){return h}),n.d(e,"getDtHeaderValue",function(){return c}),n.d(e,"getTSHeaderValue",function(){return f}),n.d(e,"getCurrentScript",function(){return b}),n.d(e,"getElasticScript",function(){return S}),n.d(e,"getTimeOrigin",function(){return v}),n.d(e,"generateRandomId",function(){return a}),n.d(e,"getEarliestSpan",function(){return A}),n.d(e,"getLatestNonXHRSpan",function(){return C}),n.d(e,"getDuration",function(){return M}),n.d(e,"getTime",function(){return L}),n.d(e,"now",function(){return x}),n.d(e,"rng",function(){return s}),n.d(e,"checkSameOrigin",function(){return l}),n.d(e,"scheduleMacroTask",function(){return P}),n.d(e,"scheduleMicroTask",function(){return k}),n.d(e,"setLabel",function(){return g}),n.d(e,"setRequestHeader",function(){return p}),n.d(e,"stripQueryStringFromUrl",function(){return _}),n.d(e,"find",function(){return I}),n.d(e,"removeInvalidChars",function(){return w}),n.d(e,"PERF",function(){return U}),n.d(e,"isPerfTimelineSupported",function(){return F}),n.d(e,"isBrowser",function(){return G}),n.d(e,"isPerfTypeSupported",function(){return D});for(var H=n("../rum-core/dist/es/common/polyfills.js"),V=[].slice,G="undefined"!=typeof window,U=G&&"undefined"!=typeof performance?performance:{},B=[],Y=0;Y<256;++Y)B[Y]=(Y+256).toString(16).substr(1);var K=new Uint8Array(16)},"../rum-core/dist/es/error-logging/error-logging.js":function(t,e,n){"use strict";function o(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}function i(t){var e=!1,n={};if(Object.keys(t).forEach(function(o){if(!(d.indexOf(o)>=0)){var i=t[o];if(null!=i&&"function"!=typeof i){if("object"===r(i)){if("function"!=typeof i.toISOString)return;i=i.toISOString()}n[o]=i,e=!0}}}),e)return n}n.r(e);var s=n("../rum-core/dist/es/error-logging/stack-trace.js"),a=n("../rum-core/dist/es/common/utils.js"),c=n("../rum-core/dist/es/common/context.js"),u=n("../rum-core/dist/es/common/truncate.js"),d=["stack","message"],f=function(){function t(t,e,n){this._apmServer=t,this._configService=e,this._transactionService=n}var e=t.prototype;return e.createErrorDataModel=function(t){var e=Object(s.createStackTraces)(t),n=Object(s.filterInvalidFrames)(e),d="(inline script)",f=n[n.length-1];f&&f.filename&&(d=f.filename);var p=t.message,l=t.error,m=p,g="",h={};if(l&&"object"===r(l)){m=m||l.message,g=l.name;var v=i(l);v&&(h.custom=v)}g||m&&m.indexOf(":")>-1&&(g=m.split(":")[0]);var _=this._transactionService.getCurrentTransaction(),E=_?_.context:{},y=this._configService.get("context"),T=(y.tags,o(y,["tags"])),S=Object(c.getPageContext)(),b=Object(a.merge)({},S,E,T,h),O={id:Object(a.generateRandomId)(),culprit:d,exception:{message:m,stacktrace:n,type:g},context:b};return _&&(O=Object(a.extend)(O,{trace_id:_.traceId,parent_id:_.id,transaction_id:_.id,transaction:{type:_.type,sampled:_.sampled}})),Object(u.truncateModel)(u.ERROR_MODEL,O)},e.logErrorEvent=function(t){if(void 0!==t){var e=this.createErrorDataModel(t);void 0!==e.exception.message&&this._apmServer.addError(e)}},e.registerListeners=function(){var t=this;window.addEventListener("error",function(e){return t.logErrorEvent(e)}),window.addEventListener("unhandledrejection",function(e){return t.logPromiseEvent(e)})},e.logPromiseEvent=function(t){var e="Unhandled promise rejection: ",n=t.reason;null==n&&(n="<no reason specified>");var o;if("string"==typeof n.message){o={error:n,message:e+(n.name?n.name+": ":"")+n.message}}else n="object"===r(n)?"<object>":"function"==typeof n?"<function>":n,o={message:e+n};this.logErrorEvent(o)},e.logError=function(t){var e={};return"string"==typeof t?e.message=t:e.error=t,this.logErrorEvent(e)},t}();e.default=f},"../rum-core/dist/es/error-logging/index.js":function(t,e,n){"use strict";function r(){s.serviceCreators.ErrorLogging=function(t){var e=t.getService([i.APM_SERVER,i.CONFIG_SERVICE,"TransactionService"]),n=e[0],r=e[1],s=e[2];return new o.default(n,r,s)}}n.r(e),n.d(e,"registerServices",function(){return r});var o=n("../rum-core/dist/es/error-logging/error-logging.js"),i=n("../rum-core/dist/es/common/constants.js"),s=n("../rum-core/dist/es/common/service-factory.js")},"../rum-core/dist/es/error-logging/stack-trace.js":function(t,e,n){"use strict";function r(t){var e=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return t.indexOf(e)>-1&&(t=t.replace(e+"/","")),t}function o(t){return void 0===t&&(t=""),"<anonymous>"===t&&(t=""),t}function i(t){return!!t&&0===window.location.href.indexOf(t)}function s(t){return t.map(function(t){return t.functionName&&(t.functionName=a(t.functionName)),t})}function a(t){var e=t.split("/");return t=e.length>1?["Object",e[e.length-1]].join("."):e[0],t=t.replace(/.<$/gi,".<anonymous>"),t=t.replace(/^Anonymous function$/,"<anonymous>"),e=t.split("."),t=e.length>1?e[e.length-1]:e[0]}function c(t){var e=t.error,n=t.filename,a=t.lineno,c=t.colno,u=[];if(e)try{u=f.a.parse(e)}catch(t){}return 0===u.length&&(u=[{fileName:n,lineNumber:a,columnNumber:c}]),s(u).map(function(t){var e=t.fileName,n=t.lineNumber,s=t.columnNumber,a=t.functionName,c=void 0===a?"<anonymous>":a;if(!e&&!n)return{};if(!s&&!n)return{};var u=o(e),d=r(u);return i(u)&&(d="(inline script)"),{abs_path:e,filename:d,function:c,lineno:n,colno:s}})}function u(t){return t.filter(function(t){var e=t.filename,n=t.lineno;return void 0!==e&&void 0!==n})}n.r(e),n.d(e,"createStackTraces",function(){return c}),n.d(e,"filterInvalidFrames",function(){return u});var d=n("../../node_modules/error-stack-parser/error-stack-parser.js"),f=n.n(d)},"../rum-core/dist/es/index.js":function(t,e,n){"use strict";function r(){return Object(i.registerServices)(),Object(o.registerServices)(),new s.ServiceFactory}n.r(e),n.d(e,"createServiceFactory",function(){return r});var o=n("../rum-core/dist/es/error-logging/index.js"),i=n("../rum-core/dist/es/performance-monitoring/index.js"),s=n("../rum-core/dist/es/common/service-factory.js");n.d(e,"ServiceFactory",function(){return s.ServiceFactory});var a=n("../rum-core/dist/es/common/utils.js");n.d(e,"isPlatformSupported",function(){return a.isPlatformSupported}),n.d(e,"isBrowser",function(){return a.isBrowser}),n.d(e,"scheduleMicroTask",function(){return a.scheduleMicroTask}),n.d(e,"scheduleMacroTask",function(){return a.scheduleMacroTask});var c=n("../rum-core/dist/es/common/patching/index.js");n.d(e,"patchAll",function(){return c.patchAll}),n.d(e,"patchEventHandler",function(){return c.patchEventHandler});var u=n("../rum-core/dist/es/common/constants.js");n.d(e,"ERROR",function(){return u.ERROR}),n.d(e,"PAGE_LOAD",function(){return u.PAGE_LOAD}),n.d(e,"CONFIG_SERVICE",function(){return u.CONFIG_SERVICE}),n.d(e,"LOGGING_SERVICE",function(){return u.LOGGING_SERVICE}),n.d(e,"APM_SERVER",function(){return u.APM_SERVER});var d=n("../rum-core/dist/es/common/instrument.js");n.d(e,"getInstrumentationFlags",function(){return d.getInstrumentationFlags});var f=n("../rum-core/dist/es/common/after-frame.js");n.d(e,"afterFrame",function(){return f.default});var p=n("../rum-core/dist/es/bootstrap.js");n.d(e,"bootstrap",function(){return p.bootstrap});var l=n("../rum-core/dist/es/opentracing/index.js");n.d(e,"createTracer",function(){return l.createTracer})},"../rum-core/dist/es/opentracing/index.js":function(t,e,n){"use strict";function r(t){var e=t.getService("PerformanceMonitoring"),n=t.getService("TransactionService"),r=t.getService("ErrorLogging"),i=t.getService("LoggingService");return new o.default(e,n,i,r)}n.r(e),n.d(e,"createTracer",function(){return r});var o=n("../rum-core/dist/es/opentracing/tracer.js");n.d(e,"Tracer",function(){return o.default});var i=n("../rum-core/dist/es/opentracing/span.js");n.d(e,"Span",function(){return i.default})},"../rum-core/dist/es/opentracing/span.js":function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.r(e);var o=n("../../node_modules/opentracing/lib/span.js"),i=n("../rum-core/dist/es/common/utils.js"),s=n("../rum-core/dist/es/performance-monitoring/transaction.js"),a=function(t){function e(e,n){var r;return r=t.call(this)||this,r.__tracer=e,r.span=n,r.isTransaction=n instanceof s.default,r.spanContext={id:n.id,traceId:n.traceId,sampled:n.sampled},r}r(e,t);var n=e.prototype;return n._context=function(){return this.spanContext},n._tracer=function(){return this.__tracer},n._setOperationName=function(t){this.span.name=t},n._addTags=function(t){var e=Object(i.extend)({},t);if(e.type&&(this.span.type=e.type,delete e.type),this.isTransaction){var n=e["user.id"],r=e["user.username"],o=e["user.email"];(n||r||o)&&(this.span.addContext({user:{id:n,username:r,email:o}}),delete e["user.id"],delete e["user.username"],delete e["user.email"])}this.span.addLabels(e)},n._log=function(t,e){"error"===t.event&&(t["error.object"]?this.__tracer.errorLogging.logError(t["error.object"]):t.message&&this.__tracer.errorLogging.logError(t.message))},n._finish=function(t){this.span.end(),t&&(this.span._end=t-Object(i.getTimeOrigin)())},e}(o.Span);e.default=a},"../rum-core/dist/es/opentracing/tracer.js":function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.r(e);var o=n("../../node_modules/opentracing/lib/tracer.js"),i=n("../../node_modules/opentracing/lib/constants.js"),s=n("../../node_modules/opentracing/lib/span.js"),a=n("../rum-core/dist/es/common/utils.js"),c=n("../rum-core/dist/es/state.js"),u=n("../rum-core/dist/es/opentracing/span.js"),d=function(t){function e(e,n,r,o){var i;return i=t.call(this)||this,i.performanceMonitoring=e,i.transactionService=n,i.loggingService=r,i.errorLogging=o,i}r(e,t);var n=e.prototype;return n._startSpan=function(t,e){var n={managed:!0};if(e)if(n.timestamp=e.startTime,e.childOf)n.parentId=e.childOf.id;else if(e.references&&e.references.length>0){e.references.length>1&&c.__DEV__&&this.loggingService.debug("Elastic APM OpenTracing: Unsupported number of references, only the first childOf reference will be recorded.");var r=Object(a.find)(e.references,function(t){return t.type()===i.REFERENCE_CHILD_OF});r&&(n.parentId=r.referencedContext().id)}var o;if(!(o=this.transactionService.getCurrentTransaction()?this.transactionService.startSpan(t,void 0,n):this.transactionService.startTransaction(t,void 0,n)))return new s.Span;n.timestamp&&(o._start=n.timestamp-Object(a.getTimeOrigin)());var d=new u.default(this,o);return e&&e.tags&&d.addTags(e.tags),d},n._inject=function(t,e,n){switch(e){case i.FORMAT_TEXT_MAP:case i.FORMAT_HTTP_HEADERS:this.performanceMonitoring.injectDtHeader(t,n);break;case i.FORMAT_BINARY:c.__DEV__&&this.loggingService.debug("Elastic APM OpenTracing: binary carrier format is not supported.")}},n._extract=function(t,e){var n;switch(t){case i.FORMAT_TEXT_MAP:case i.FORMAT_HTTP_HEADERS:n=this.performanceMonitoring.extractDtHeader(e);break;case i.FORMAT_BINARY:c.__DEV__&&this.loggingService.debug("Elastic APM OpenTracing: binary carrier format is not supported.")}return n||(n=null),n},e}(o.Tracer);e.default=d},"../rum-core/dist/es/performance-monitoring/breakdown.js":function(t,e,n){"use strict";function r(t){return{value:t}}function o(t){var e=t.spans,n=t._start,r=t._end;if(0===e.length)return t.duration();e.sort(function(t,e){return t._start-e._start});for(var o=e[0],i=o._end,s=o._start,a=i,c=s-n,u=1;u<e.length;u++)o=e[u],s=o._start,i=o._end,s>a?(c+=s-a,a=i):i>a&&(a=i);return a<r&&(c+=r-a),c}function i(t){var e={},n=o(t);e.app={count:1,duration:n};for(var r=t.spans,i=0;i<r.length;i++){var s=r[i],a=s.duration();if(0!==a&&null!=a){var c=s.type,d=s.subtype,f=c.replace(u.TRUNCATED_TYPE,"");d&&(f+="."+d),e[f]||(e[f]={duration:0,count:0}),e[f].count++,e[f].duration+=a}}return e}function s(t,e){var n=e.details,o=e.count,i=void 0===o?1:o,s=e.duration;return{transaction:t,span:n,samples:{"span.self_time.count":r(i),"span.self_time.sum.us":r(s)}}}function a(t,e){void 0===e&&(e=c.PERF.timing);var n=[],o=t.duration(),a=t.name,f=t.type,p=t.sampled,l={name:a,type:f};if(n.push({transaction:l,samples:{"transaction.duration.count":r(1),"transaction.duration.sum.us":r(o),"transaction.breakdown.count":r(p?1:0)}}),!p)return n;if(f===u.PAGE_LOAD&&e)for(var m=0;m<d.length;m++){var g=d[m],h=e[g[0]],v=e[g[1]],_=Object(c.getDuration)(h,v);0!==_&&null!=_&&n.push(s(l,{details:{type:g[2]},duration:_}))}else{var E=i(t);Object.keys(E).forEach(function(t){var e=t.split("."),r=e[0],o=e[1],i=E[t],a=i.duration,c=i.count;n.push(s(l,{details:{type:r,subtype:o},duration:a,count:c}))})}return n}n.r(e),n.d(e,"captureBreakdown",function(){return a});var c=n("../rum-core/dist/es/common/utils.js"),u=n("../rum-core/dist/es/common/constants.js"),d=[["domainLookupStart","domainLookupEnd","DNS"],["connectStart","connectEnd","TCP"],["requestStart","responseStart","Request"],["responseStart","responseEnd","Response"],["domLoading","domComplete","Processing"],["loadEventStart","loadEventEnd","Load"]]},"../rum-core/dist/es/performance-monitoring/capture-navigation.js":function(t,e,n){"use strict";function r(t,e,n,r,o){return void 0===o&&(o=0),"number"==typeof t&&"number"==typeof e&&t>=o&&e>t&&t-o>=n&&e-o<=r&&e-t<m.MAX_SPAN_DURATION&&t-o<m.MAX_SPAN_DURATION&&e-o<m.MAX_SPAN_DURATION}function o(t,e,n,o){for(var i=[],s=0;s<v.length;s++){var a=t[v[s][0]],c=t[v[s][1]];if(r(a,c,n,o,e)){var u=new l.default(v[s][2],"hard-navigation.browser-timing"),d=null;"requestStart"===v[s][0]&&(u.pageResponse=!0,d={url:location.origin}),u._start=a-e,u.end(c-e,d),i.push(u)}}return i}function i(t){var e=t.name,n=t.initiatorType,r=t.startTime,o=t.responseEnd,i="resource";n&&(i+="."+n);var s=Object(g.stripQueryStringFromUrl)(e),a=new l.default(s,i);return a._start=r,a.end(o,{url:e,entry:t}),a}function s(t,e){return null!=e&&t>e}function a(t){return/intake\/v\d+\/rum\/events/.test(t)}function c(t,e,n,o){for(var c=[],u=0;u<t.length;u++){var d=t[u],f=d.initiatorType,p=d.name,l=d.startTime,g=d.responseEnd;-1!==m.RESOURCE_INITIATOR_TYPES.indexOf(f)&&null!=p&&(("xmlhttprequest"!==f&&"fetch"!==f||!a(p)&&!s(l,e))&&r(l,g,n,o)&&c.push(i(t[u])))}return c}function u(t,e,n){for(var o=[],i=0;i<t.length;i++){var s=t[i],a=s.name,c=s.startTime,u=s.duration,d=c+u;if(!(u<=m.USER_TIMING_THRESHOLD)&&r(c,d,e,n)){var f=new l.default(a,"app");f._start=c,f.end(d),o.push(f)}}return o}function d(t){
var e=t.fetchStart,n=t.navigationStart,r=t.responseStart,o=t.responseEnd;if(e>=n&&r>=e&&o>=r){var i={};return _.forEach(function(n){var r=t[n];r&&r>=e&&(i[n]=parseInt(r-e))}),i}return null}function f(t){var e=d(t);return null==e?null:{navigationTiming:e,agent:{timeToFirstByte:e.responseStart,domInteractive:e.domInteractive,domComplete:e.domComplete}}}function p(t){if(t.captureTimings){var e=t._end;if(t.type===m.PAGE_LOAD){if(t.marks&&t.marks.custom){var n=t.marks.custom;Object.keys(n).forEach(function(e){n[e]+=t._start})}t._start=0;var r=g.PERF.timing;o(r,r.fetchStart,0,e).forEach(function(e){e.traceId=t.traceId,e.sampled=t.sampled,e.pageResponse&&t.options.pageLoadSpanId&&(e.id=t.options.pageLoadSpanId),t.spans.push(e)}),t.addMarks(f(r))}if(Object(g.isPerfTimelineSupported)()){var i=t._start;c(g.PERF.getEntriesByType(m.RESOURCE),h.state.bootstrapTime,i,e).forEach(function(e){return t.spans.push(e)});u(g.PERF.getEntriesByType(m.MEASURE),i,e).forEach(function(e){return t.spans.push(e)})}}}n.r(e),n.d(e,"getPageLoadMarks",function(){return f}),n.d(e,"captureNavigation",function(){return p}),n.d(e,"createNavigationTimingSpans",function(){return o}),n.d(e,"createResourceTimingSpans",function(){return c}),n.d(e,"createUserTimingSpans",function(){return u}),n.d(e,"NAVIGATION_TIMING_MARKS",function(){return _}),n.d(e,"COMPRESSED_NAV_TIMING_MARKS",function(){return E});var l=n("../rum-core/dist/es/performance-monitoring/span.js"),m=n("../rum-core/dist/es/common/constants.js"),g=n("../rum-core/dist/es/common/utils.js"),h=n("../rum-core/dist/es/state.js"),v=[["domainLookupStart","domainLookupEnd","Domain lookup"],["connectStart","connectEnd","Making a connection to the server"],["requestStart","responseEnd","Requesting and receiving the document"],["domLoading","domInteractive","Parsing the document, executing sync. scripts"],["domContentLoadedEventStart","domContentLoadedEventEnd",'Fire "DOMContentLoaded" event'],["loadEventStart","loadEventEnd",'Fire "load" event']],_=["fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],E=["fs","ls","le","cs","ce","qs","rs","re","dl","di","ds","de","dc","es","ee"]},"../rum-core/dist/es/performance-monitoring/index.js":function(t,e,n){"use strict";function r(){a.serviceCreators.TransactionService=function(t){var e=t.getService([s.LOGGING_SERVICE,s.CONFIG_SERVICE]),n=e[0],r=e[1];return new i.default(n,r)},a.serviceCreators.PerformanceMonitoring=function(t){var e=t.getService([s.APM_SERVER,s.CONFIG_SERVICE,s.LOGGING_SERVICE,"TransactionService"]),n=e[0],r=e[1],i=e[2],a=e[3];return new o.default(n,r,i,a)}}n.r(e),n.d(e,"registerServices",function(){return r});var o=n("../rum-core/dist/es/performance-monitoring/performance-monitoring.js"),i=n("../rum-core/dist/es/performance-monitoring/transaction-service.js"),s=n("../rum-core/dist/es/common/constants.js"),a=n("../rum-core/dist/es/common/service-factory.js")},"../rum-core/dist/es/performance-monitoring/metrics.js":function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=o.name,s=o.startTime,a=o.duration,c=o.attribution,d=s+a,p=new f.default("Longtask("+i+")",u.LONG_TASK,{startTime:s});if(e.count++,e.duration+=a,a>e.max&&(e.max=a),c.length>0){var l=c[0],m=l.name,g=l.containerType,h=l.containerName,v=l.containerId,_={attribution:m,type:g};h&&(_.name=h),v&&(_.id=v),p.addContext({custom:_})}p.end(d),n.push(p)}return n}function o(t){var e=t[0];if(e){var n=e.startTime,r=e.processingStart,o=new f.default("First Input Delay",u.FIRST_INPUT,{startTime:n});return o.end(r),o}}function i(t){var e=t.start,n=t.duration,r=new f.default("Total Blocking Time",u.LONG_TASK,{startTime:e});return r.end(e+n),r}function s(t){t.forEach(function(t){var e=t.name,n=t.startTime,r=t.duration;if(!(n<p.fcp||"self"!==e&&-1===e.indexOf("same-origin"))){p.tbt.start=Math.min(p.tbt.start,n);var o=r-l;o>0&&(p.tbt.duration+=o)}})}function a(t){t.forEach(function(t){t.hadRecentInput||(p.cls+=t.value)})}function c(t,e){var n=e.capturePaint,i=t.getEntriesByType(u.LONG_TASK),c=r(i,p.longtask),f={spans:c,marks:{}};if(!n)return f;var l=t.getEntriesByType(u.LARGEST_CONTENTFUL_PAINT),m=l[l.length-1];if(m){var g=parseInt(m.startTime);p.lcp=g,f.marks.largestContentfulPaint=g}var h=d.PERF.timing,v=h.fetchStart-h.navigationStart,_=t.getEntriesByName(u.FIRST_CONTENTFUL_PAINT)[0];if(_){var E=parseInt(v>=0?_.startTime-v:_.startTime);p.fcp=E,f.marks.firstContentfulPaint=E}var y=t.getEntriesByType(u.FIRST_INPUT),T=o(y);return T&&(p.fid=T.duration(),f.spans.push(T)),s(i),a(t.getEntriesByType(u.LAYOUT_SHIFT)),f}n.r(e),n.d(e,"metrics",function(){return p}),n.d(e,"createLongTaskSpans",function(){return r}),n.d(e,"createFirstInputDelaySpan",function(){return o}),n.d(e,"createTotalBlockingTimeSpan",function(){return i}),n.d(e,"calculateTotalBlockingTime",function(){return s}),n.d(e,"calculateCumulativeLayoutShift",function(){return a}),n.d(e,"captureObserverEntries",function(){return c}),n.d(e,"PerfEntryRecorder",function(){return m});var u=n("../rum-core/dist/es/common/constants.js"),d=n("../rum-core/dist/es/common/utils.js"),f=n("../rum-core/dist/es/performance-monitoring/span.js"),p={fid:0,fcp:0,tbt:{start:1/0,duration:0},cls:0,longtask:{count:0,duration:0,max:0}},l=50,m=function(){function t(t){this.po={observe:d.noop,disconnect:d.noop},window.PerformanceObserver&&(this.po=new PerformanceObserver(t))}var e=t.prototype;return e.start=function(t){try{var e=!0;t===u.LONG_TASK&&(e=!1),this.po.observe({type:t,buffered:e})}catch(t){}},e.stop=function(){this.po.disconnect()},t}()},"../rum-core/dist/es/performance-monitoring/performance-monitoring.js":function(t,e,n){"use strict";function r(t,e,n){t.sort(function(t,e){return t._start-e._start});var r=[],o=1;return t.forEach(function(i,s){if(0===r.length)r.push(i);else{var a=r[r.length-1],c=a.type===i.type&&a.subtype===i.subtype&&a.action===i.action&&a.name===i.name&&i.duration()/e<n&&(i._start-a._end)/e<n,u=t.length===s+1;c&&(o++,a._end=i._end),o>1&&(!c||u)&&(a.name=o+"x "+a.name,o=1),c||r.push(i)}}),r}function o(t){if(t.sampled){var e=t.spans.filter(function(e){return e.duration()>0&&e._start>=t._start&&e._end<=t._end});if(t.isManaged()){var n=t.duration(),o=r(e,n,p);t.spans=o}else t.spans=e}else t.resetFields();return t}n.r(e),n.d(e,"groupSmallContinuouslySimilarSpans",function(){return r}),n.d(e,"adjustTransaction",function(){return o}),n.d(e,"default",function(){return l});var i=n("../rum-core/dist/es/common/utils.js"),s=n("../rum-core/dist/es/common/url.js"),a=n("../rum-core/dist/es/common/patching/index.js"),c=n("../rum-core/dist/es/common/patching/patch-utils.js"),u=n("../rum-core/dist/es/common/constants.js"),d=n("../rum-core/dist/es/common/truncate.js"),f=n("../rum-core/dist/es/state.js"),p=.05,l=function(){function t(t,e,n,r){this._apmServer=t,this._configService=e,this._logginService=n,this._transactionService=r}var e=t.prototype;return e.init=function(t){var e=this;void 0===t&&(t={}),this._configService.events.observe(u.TRANSACTION_END+u.AFTER_EVENT,function(t){var n=e.createTransactionPayload(t);n&&e._apmServer.addTransaction(n)}),t[u.HISTORY]&&a.patchEventHandler.observe(u.HISTORY,this.getHistorySub()),t[u.XMLHTTPREQUEST]&&a.patchEventHandler.observe(u.XMLHTTPREQUEST,this.getXHRSub()),t[u.FETCH]&&a.patchEventHandler.observe(u.FETCH,this.getFetchSub()),t[u.EVENT_TARGET]&&a.patchEventHandler.observe(u.EVENT_TARGET,this.getEventTargetSub())},e.getEventTargetSub=function(){var t=this._transactionService;return function(e,n){if(e===u.SCHEDULE&&n.source===u.EVENT_TARGET&&"click"===n.eventType){var r=n.target,o=r.getAttribute("name"),i="";o&&(i='["'+o+'"]');var s=r.tagName.toLowerCase(),a=t.startTransaction("Click - "+s+i,u.USER_INTERACTION,{managed:!0,canReuse:!0,reuseThreshold:100});if(a){var c=r.getAttribute("class");c&&a.addContext({custom:{classes:c}})}}}},e.getHistorySub=function(){var t=this._transactionService;return function(e,n){n.source===u.HISTORY&&e===u.INVOKE&&t.startTransaction(n.data.title,"route-change",{managed:!0,canReuse:!0})}},e.getXHRSub=function(){var t=this;return function(e,n){n.source!==u.XMLHTTPREQUEST||c.globalState.fetchInProgress||t.processAPICalls(e,n)}},e.getFetchSub=function(){var t=this;return function(e,n){n.source===u.FETCH&&t.processAPICalls(e,n)}},e.processAPICalls=function(t,e){var n=this._configService,r=this._transactionService;if(t===u.SCHEDULE&&e.data){var o=e.data,a=new s.Url(o.url),c=o.method+" "+(a.relative?a.path:Object(i.stripQueryStringFromUrl)(a.href));r.getCurrentTransaction()||r.startTransaction(c,u.HTTP_REQUEST_TYPE,{managed:!0});var d=r.startSpan(c,"external.http",{blocking:!0});if(!d)return;var p=n.get("distributedTracing"),l=n.get("distributedTracingOrigins"),m=new s.Url(window.location.href),g=Object(i.checkSameOrigin)(a.origin,m.origin)||Object(i.checkSameOrigin)(a.origin,l),h=o.target;if(p&&g&&h){this.injectDtHeader(d,h);n.get("propagateTracestate")&&this.injectTSHeader(d,h)}else f.__DEV__&&this._logginService.debug("Could not inject distributed tracing header to the request origin ('"+a.origin+"') from the current origin ('"+m.origin+"')");o.sync&&(d.sync=o.sync),o.span=d}else if(t===u.INVOKE){var v=e.data;if(v&&v.span){var _,E=v.span,y=v.response,T=v.target;_=y?y.status:T.status;var S;"abort"!=v.status&&(S=_>=400||0==_?u.OUTCOME_FAILURE:u.OUTCOME_SUCCESS),E.outcome=S;var b=r.getCurrentTransaction();b&&b.type===u.HTTP_REQUEST_TYPE&&(b.outcome=S),r.endSpan(E,v)}}},e.injectDtHeader=function(t,e){var n=this._configService.get("distributedTracingHeaderName"),r=Object(i.getDtHeaderValue)(t);Object(i.isDtHeaderValid)(r)&&r&&n&&Object(i.setRequestHeader)(e,n,r)},e.injectTSHeader=function(t,e){var n=Object(i.getTSHeaderValue)(t);n&&Object(i.setRequestHeader)(e,"tracestate",n)},e.extractDtHeader=function(t){var e=this._configService,n=e.get("distributedTracingHeaderName");if(t)return Object(i.parseDtHeaderValue)(t[n])},e.filterTransaction=function(t){var e=t.duration();if(!e){if(f.__DEV__){var n="transaction("+t.id+", "+t.name+") was discarded! ";n+=0===e?"Transaction duration is 0":"Transaction wasn't ended",this._logginService.debug(n)}return!1}if(t.isManaged()){if(e>6e4)return f.__DEV__&&this._logginService.debug("transaction("+t.id+", "+t.name+") was discarded! Transaction duration ("+e+") is greater than managed transaction threshold (60000)"),!1;if(t.sampled&&0===t.spans.length)return f.__DEV__&&this._logginService.debug("transaction("+t.id+", "+t.name+") was discarded! Transaction does not have any spans"),!1}return!0},e.createTransactionDataModel=function(t){var e=t._start,n=t.spans.map(function(n){var r={id:n.id,transaction_id:t.id,parent_id:n.parentId||t.id,trace_id:t.traceId,name:n.name,type:n.type,subtype:n.subtype,action:n.action,sync:n.sync,start:parseInt(n._start-e),duration:n.duration(),context:n.context,outcome:n.outcome,sample_rate:n.sampleRate};return Object(d.truncateModel)(d.SPAN_MODEL,r)}),r={id:t.id,trace_id:t.traceId,name:t.name,type:t.type,duration:t.duration(),spans:n,context:t.context,marks:t.marks,breakdown:t.breakdownTimings,span_count:{started:n.length},sampled:t.sampled,sample_rate:t.sampleRate,experience:t.experience,outcome:t.outcome};return Object(d.truncateModel)(d.TRANSACTION_MODEL,r)},e.createTransactionPayload=function(t){var e=o(t);if(this.filterTransaction(e))return this.createTransactionDataModel(t)},t}()},"../rum-core/dist/es/performance-monitoring/span-base.js":function(t,e,n){"use strict";n.r(e);var r=n("../rum-core/dist/es/common/utils.js"),o=n("../rum-core/dist/es/common/constants.js"),i=function(){function t(t,e,n){void 0===n&&(n={}),t||(t=o.NAME_UNKNOWN),e||(e=o.TYPE_CUSTOM),this.name=t,this.type=e,this.options=n,this.id=n.id||Object(r.generateRandomId)(16),this.traceId=n.traceId,this.sampled=n.sampled,this.sampleRate=n.sampleRate,this.timestamp=n.timestamp,this._start=Object(r.getTime)(n.startTime),this._end=void 0,this.ended=!1,this.outcome=void 0,this.onEnd=n.onEnd}var e=t.prototype;return e.ensureContext=function(){this.context||(this.context={})},e.addLabels=function(t){this.ensureContext();var e=this.context;e.tags||(e.tags={}),Object.keys(t).forEach(function(n){return Object(r.setLabel)(n,t[n],e.tags)})},e.addContext=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];0!==e.length&&(this.ensureContext(),r.merge.apply(void 0,[this.context].concat(e)))},e.end=function(t){this.ended||(this.ended=!0,this._end=Object(r.getTime)(t),this.callOnEnd())},e.callOnEnd=function(){"function"==typeof this.onEnd&&this.onEnd(this)},e.duration=function(){return Object(r.getDuration)(this._start,this._end)},t}();e.default=i},"../rum-core/dist/es/performance-monitoring/span.js":function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.r(e);var o=n("../rum-core/dist/es/performance-monitoring/span-base.js"),i=n("../rum-core/dist/es/common/context.js"),s=function(t){function e(e,n,r){var o;if(o=t.call(this,e,n,r)||this,o.parentId=o.options.parentId,o.subtype=void 0,o.action=void 0,-1!==o.type.indexOf(".")){var i=o.type.split(".",3);o.type=i[0],o.subtype=i[1],o.action=i[2]}return o.sync=o.options.sync,o}return r(e,t),e.prototype.end=function(e,n){t.prototype.end.call(this,e),Object(i.addSpanContext)(this,n)},e}(o.default);e.default=s},"../rum-core/dist/es/performance-monitoring/transaction-service.js":function(t,e,n){"use strict";n.r(e);var r=n("../rum-core/dist/es/common/polyfills.js"),o=n("../rum-core/dist/es/performance-monitoring/transaction.js"),i=n("../rum-core/dist/es/performance-monitoring/metrics.js"),s=n("../rum-core/dist/es/common/utils.js"),a=n("../rum-core/dist/es/performance-monitoring/capture-navigation.js"),c=n("../rum-core/dist/es/common/constants.js"),u=n("../rum-core/dist/es/common/context.js"),d=n("../rum-core/dist/es/state.js"),f=n("../rum-core/dist/es/common/url.js"),p=function(){function t(t,e){var n=this;this._config=e,this._logger=t,this.currentTransaction=void 0,this.respIntervalId=void 0,this.recorder=new i.PerfEntryRecorder(function(t){var e=n.getCurrentTransaction();if(e&&e.captureTimings){var r,o=!1;e.type===c.PAGE_LOAD&&(o=!0);var s=Object(i.captureObserverEntries)(t,{capturePaint:o}),a=s.spans,u=s.marks;(r=e.spans).push.apply(r,a),e.addMarks({agent:u})}})}var e=t.prototype;return e.createCurrentTransaction=function(t,e,n){var r=new o.default(t,e,n);return this.currentTransaction=r,r},e.getCurrentTransaction=function(){if(this.currentTransaction&&!this.currentTransaction.ended)return this.currentTransaction},e.createOptions=function(t){var e=this._config.config,n={transactionSampleRate:e.transactionSampleRate},r=Object(s.extend)(n,t);return r.managed&&(r=Object(s.extend)({pageLoadTraceId:e.pageLoadTraceId,pageLoadSampled:e.pageLoadSampled,pageLoadSpanId:e.pageLoadSpanId,pageLoadTransactionName:e.pageLoadTransactionName},r)),r},e.startManagedTransaction=function(t,e,n){var r=this.getCurrentTransaction(),o=!1;if(r)if(r.canReuse()&&n.canReuse){var i=r.type,s=c.TRANSACTION_TYPE_ORDER.indexOf(r.type),a=c.TRANSACTION_TYPE_ORDER.indexOf(e);s>=0&&a<s&&(i=e),d.__DEV__&&this._logger.debug("redefining transaction("+r.id+", "+r.name+", "+r.type+")","to","("+(t||r.name)+", "+i+")",r),r.redefine(t,i,n),o=!0}else d.__DEV__&&this._logger.debug("ending previous transaction("+r.id+", "+r.name+")",r),r.end(),r=this.createCurrentTransaction(t,e,n);else r=this.createCurrentTransaction(t,e,n);return r.type===c.PAGE_LOAD&&(o||(this.recorder.start(c.LARGEST_CONTENTFUL_PAINT),this.recorder.start(c.PAINT),this.recorder.start(c.FIRST_INPUT),this.recorder.start(c.LAYOUT_SHIFT)),n.pageLoadTraceId&&(r.traceId=n.pageLoadTraceId),n.pageLoadSampled&&(r.sampled=n.pageLoadSampled),r.name===c.NAME_UNKNOWN&&n.pageLoadTransactionName&&(r.name=n.pageLoadTransactionName)),!o&&this._config.get("monitorLongtasks")&&this.recorder.start(c.LONG_TASK),r.sampled&&(r.captureTimings=!0),r},e.startTransaction=function(t,e,n){var r,i=this,s=this.createOptions(n),a=!0;if(s.managed){var u=this.currentTransaction;r=this.startManagedTransaction(t,e,s),u===r&&(a=!1)}else r=new o.default(t,e,s);return r.onEnd=function(){return i.handleTransactionEnd(r)},a&&(d.__DEV__&&this._logger.debug("startTransaction("+r.id+", "+r.name+", "+r.type+")"),this._config.events.send(c.TRANSACTION_START,[r])),r},e.handleTransactionEnd=function(t){var e=this;this.recorder.stop();var n=window.location.href;return r.Promise.resolve().then(function(){var r=t.name,o=t.type;if(d.state.lastHiddenStart>=t._start)return void(d.__DEV__&&e._logger.debug("transaction("+t.id+", "+r+", "+o+") was discarded! The page was hidden during the transaction!"));if(e.shouldIgnoreTransaction(r)||o===c.TEMPORARY_TYPE)return void(d.__DEV__&&e._logger.debug("transaction("+t.id+", "+r+", "+o+") is ignored"));if(o===c.PAGE_LOAD){var p=e._config.get("pageLoadTransactionName");if(r===c.NAME_UNKNOWN&&p&&(t.name=p),t.captureTimings){var l=i.metrics.cls,m=i.metrics.fid,g=i.metrics.tbt,h=i.metrics.longtask;g.duration>0&&t.spans.push(Object(i.createTotalBlockingTimeSpan)(g)),t.experience={},Object(s.isPerfTypeSupported)(c.LONG_TASK)&&(t.experience.tbt=g.duration),Object(s.isPerfTypeSupported)(c.LAYOUT_SHIFT)&&(t.experience.cls=l),m>0&&(t.experience.fid=m),h.count>0&&(t.experience.longtask={count:h.count,sum:h.duration,max:h.max})}}t.name===c.NAME_UNKNOWN&&(t.name=Object(f.slugifyUrl)(n)),Object(a.captureNavigation)(t),e.adjustTransactionTime(t),e._config.get("breakdownMetrics")&&t.captureBreakdown();var v=e._config.get("context");Object(u.addTransactionContext)(t,v),e._config.events.send(c.TRANSACTION_END,[t]),d.__DEV__&&e._logger.debug("end transaction("+t.id+", "+t.name+", "+t.type+")",t)},function(n){d.__DEV__&&e._logger.debug("error ending transaction("+t.id+", "+t.name+")",n)})},e.adjustTransactionTime=function(t){var e=t.spans,n=Object(s.getEarliestSpan)(e);n&&n._start<t._start&&(t._start=n._start);var r=Object(s.getLatestNonXHRSpan)(e);r&&r._end>t._end&&(t._end=r._end);for(var o=t._end,i=0;i<e.length;i++){var a=e[i];a._end>o&&(a._end=o,a.type+=c.TRUNCATED_TYPE),a._start>o&&(a._start=o)}},e.shouldIgnoreTransaction=function(t){var e=this._config.get("ignoreTransactions");if(e&&e.length)for(var n=0;n<e.length;n++){var r=e[n];if("function"==typeof r.test){if(r.test(t))return!0}else if(r===t)return!0}return!1},e.startSpan=function(t,e,n){var r=this.getCurrentTransaction();r||(r=this.createCurrentTransaction(void 0,c.TEMPORARY_TYPE,this.createOptions({canReuse:!0,managed:!0})));var o=r.startSpan(t,e,n);return d.__DEV__&&this._logger.debug("startSpan("+t+", "+o.type+")","on transaction("+r.id+", "+r.name+")"),o},e.endSpan=function(t,e){if(t){if(d.__DEV__){var n=this.getCurrentTransaction();n&&this._logger.debug("endSpan("+t.name+", "+t.type+")","on transaction("+n.id+", "+n.name+")")}t.end(null,e)}},t}();e.default=p},"../rum-core/dist/es/performance-monitoring/transaction.js":function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.r(e);var o=n("../rum-core/dist/es/performance-monitoring/span.js"),i=n("../rum-core/dist/es/performance-monitoring/span-base.js"),s=n("../rum-core/dist/es/common/utils.js"),a=n("../rum-core/dist/es/common/constants.js"),c=n("../rum-core/dist/es/performance-monitoring/breakdown.js"),u=function(t){function e(e,n,r){var o;return o=t.call(this,e,n,r)||this,o.traceId=Object(s.generateRandomId)(),o.marks=void 0,o.spans=[],o._activeSpans={},o._activeTasks=new Set,o.blocked=!1,o.captureTimings=!1,o.breakdownTimings=[],o.sampleRate=o.options.transactionSampleRate,o.sampled=Math.random()<=o.sampleRate,o}r(e,t);var n=e.prototype;return n.addMarks=function(t){this.marks=Object(s.merge)(this.marks||{},t)},n.mark=function(t){var e=Object(s.removeInvalidChars)(t),n=Object(s.now)()-this._start,r={};r[e]=n,this.addMarks({custom:r})},n.canReuse=function(){var t=this.options.reuseThreshold||a.REUSABILITY_THRESHOLD;return!!this.options.canReuse&&!this.ended&&Object(s.now)()-this._start<t},n.redefine=function(t,e,n){t&&(this.name=t),e&&(this.type=e),n&&Object(s.extend)(this.options,n)},n.startSpan=function(t,e,n){var r=this;if(!this.ended){var i=Object(s.extend)({},n);i.onEnd=function(t){r._onSpanEnd(t)},i.traceId=this.traceId,i.sampled=this.sampled,i.sampleRate=this.sampleRate,i.parentId||(i.parentId=this.id);var a=new o.default(t,e,i);return this._activeSpans[a.id]=a,i.blocking&&this.addTask(a.id),a}},n.isFinished=function(){return!this.blocked&&0===this._activeTasks.size},n.detectFinish=function(){this.isFinished()&&this.end()},n.end=function(t){if(!this.ended){this.ended=!0,this._end=Object(s.getTime)(t);for(var e in this._activeSpans){var n=this._activeSpans[e];n.type=n.type+a.TRUNCATED_TYPE,n.end(t)}this.callOnEnd()}},n.captureBreakdown=function(){this.breakdownTimings=Object(c.captureBreakdown)(this)},n.block=function(t){this.blocked=t,this.blocked||this.detectFinish()},n.addTask=function(t){return t||(t="task-"+Object(s.generateRandomId)(16)),this._activeTasks.add(t),t},n.removeTask=function(t){this._activeTasks.delete(t)&&this.detectFinish()},n.resetFields=function(){this.spans=[],this.sampleRate=0},n._onSpanEnd=function(t){this.spans.push(t),delete this._activeSpans[t.id],this.removeTask(t.id)},n.isManaged=function(){return!!this.options.managed},e}(i.default);e.default=u},"../rum-core/dist/es/state.js":function(t,e,n){"use strict";n.r(e),n.d(e,"__DEV__",function(){return r}),n.d(e,"state",function(){return o});var r=!0,o={bootstrapTime:null,lastHiddenStart:Number.MIN_SAFE_INTEGER}},"./src/apm-base.js":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return o});var r=n("../rum-core/dist/es/index.js"),o=function(){function t(t,e){this._disable=e,this.serviceFactory=t,this._initialized=!1}var e=t.prototype;return e.isEnabled=function(){return!this._disable},e.isActive=function(){var t=this.serviceFactory.getService(r.CONFIG_SERVICE);return this.isEnabled()&&this._initialized&&t.get("active")},e.init=function(t){var e=this;if(this.isEnabled()&&!this._initialized){this._initialized=!0;var n=this.serviceFactory.getService([r.CONFIG_SERVICE,r.LOGGING_SERVICE]),o=n[0],i=n[1];o.setVersion("5.6.3"),this.config(t);var s=o.get("logLevel");i.setLevel(s);if(o.get("active")){this.serviceFactory.init();var a=Object(r.getInstrumentationFlags)(o.get("instrument"),o.get("disableInstrumentations"));if(this.serviceFactory.getService("PerformanceMonitoring").init(a),a[r.ERROR]){this.serviceFactory.getService("ErrorLogging").registerListeners()}var c=function(){return a[r.PAGE_LOAD]&&e._sendPageLoadMetrics()};o.get("centralConfig")?this.fetchCentralConfig().then(c):c()}else this._disable=!0,i.warn("RUM agent is inactive")}return this},e.fetchCentralConfig=function(){var t=this.serviceFactory.getService([r.APM_SERVER,r.LOGGING_SERVICE,r.CONFIG_SERVICE]),e=t[0],n=t[1],o=t[2];return e.fetchConfig(o.get("serviceName"),o.get("environment")).then(function(t){var e=t.transaction_sample_rate;if(e){e=Number(e);var r={transactionSampleRate:e},i=o.validate(r),s=i.invalid;if(0===s.length)o.setConfig(r);else{var a=s[0],c=a.key,u=a.value,d=a.allowed;n.warn('invalid value "'+u+'" for '+c+". Allowed: "+d+".")}}return t}).catch(function(t){n.warn("failed fetching config:",t)})},e._sendPageLoadMetrics=function(){var t=this.startTransaction(void 0,r.PAGE_LOAD,{managed:!0,canReuse:!0});if(t){t.addTask(r.PAGE_LOAD);var e=function(){setTimeout(function(){return t.removeTask(r.PAGE_LOAD)})};"complete"===document.readyState?e():window.addEventListener("load",e)}},e.observe=function(t,e){this.serviceFactory.getService(r.CONFIG_SERVICE).events.observe(t,e)},e.config=function(t){var e=this.serviceFactory.getService(r.CONFIG_SERVICE),n=e.validate(t),o=n.missing,i=n.invalid;if(0===o.length&&0===i.length)e.setConfig(t);else{var s=this.serviceFactory.getService(r.LOGGING_SERVICE),a="RUM agent isn't correctly configured. ";o.length>0&&(a+=o.join(", ")+" is missing",i.length>0&&(a+=", ")),i.forEach(function(t,e){var n=t.key,r=t.value,o=t.allowed;a+=n+' "'+r+'" contains invalid characters! (allowed: '+o+")"+(e!==i.length-1?", ":"")}),s.error(a),e.setConfig({active:!1})}},e.setUserContext=function(t){this.serviceFactory.getService(r.CONFIG_SERVICE).setUserContext(t)},e.setCustomContext=function(t){this.serviceFactory.getService(r.CONFIG_SERVICE).setCustomContext(t)},e.addLabels=function(t){this.serviceFactory.getService(r.CONFIG_SERVICE).addLabels(t)},e.setInitialPageLoadName=function(t){this.serviceFactory.getService(r.CONFIG_SERVICE).setConfig({pageLoadTransactionName:t})},e.startTransaction=function(t,e,n){if(this.isEnabled()){return this.serviceFactory.getService("TransactionService").startTransaction(t,e,n)}},e.startSpan=function(t,e,n){if(this.isEnabled()){return this.serviceFactory.getService("TransactionService").startSpan(t,e,n)}},e.getCurrentTransaction=function(){if(this.isEnabled()){return this.serviceFactory.getService("TransactionService").getCurrentTransaction()}},e.captureError=function(t){if(this.isEnabled()){return this.serviceFactory.getService("ErrorLogging").logError(t)}},e.addFilter=function(t){this.serviceFactory.getService(r.CONFIG_SERVICE).addFilter(t)},t}()},"./src/index.js":function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return s}),n.d(e,"apmBase",function(){return i}),n.d(e,"apm",function(){return i});var r=n("../rum-core/dist/es/index.js"),o=n("./src/apm-base.js");n.d(e,"ApmBase",function(){return o.default});var i=function(){if(r.isBrowser&&window.elasticApm)return window.elasticApm;var t=Object(r.bootstrap)(),e=Object(r.createServiceFactory)(),n=new o.default(e,!t);return r.isBrowser&&(window.elasticApm=n),n}(),s=i.init.bind(i);e.default=s},"./src/opentracing.js":function(t,e,n){"use strict";function r(t){return t._disable?new i.Tracer:Object(s.createTracer)(t.serviceFactory)}n.r(e),n.d(e,"createTracer",function(){return r});var o=n("./src/index.js");n.d(e,"init",function(){return o.init}),n.d(e,"apm",function(){return o.apm}),n.d(e,"apmBase",function(){return o.apmBase}),n.d(e,"ApmBase",function(){return o.ApmBase});var i=n("../../node_modules/opentracing/lib/tracer.js"),s=n("../rum-core/dist/es/index.js");"undefined"!=typeof window&&window.elasticApm&&(window.elasticApm.createTracer=r.bind(window.elasticApm,window.elasticApm)),e.default=r}})})},"./node_modules/opentracing/lib/binary_carrier.js":function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.buffer=t}return t}();e.default=n},"./node_modules/opentracing/lib/constants.js":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.FORMAT_BINARY="binary",e.FORMAT_TEXT_MAP="text_map",e.FORMAT_HTTP_HEADERS="http_headers",e.REFERENCE_CHILD_OF="child_of",e.REFERENCE_FOLLOWS_FROM="follows_from"},"./node_modules/opentracing/lib/ext/tags.js":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SPAN_KIND="span.kind",e.SPAN_KIND_RPC_CLIENT="client",e.SPAN_KIND_RPC_SERVER="server",e.SPAN_KIND_MESSAGING_PRODUCER="producer",e.SPAN_KIND_MESSAGING_CONSUMER="consumer",e.ERROR="error",e.COMPONENT="component",e.SAMPLING_PRIORITY="sampling.priority",e.PEER_SERVICE="peer.service",e.PEER_HOSTNAME="peer.hostname",e.PEER_ADDRESS="peer.address",e.PEER_HOST_IPV4="peer.ipv4",e.PEER_HOST_IPV6="peer.ipv6",e.PEER_PORT="peer.port",e.HTTP_URL="http.url",e.HTTP_METHOD="http.method",e.HTTP_STATUS_CODE="http.status_code",e.MESSAGE_BUS_DESTINATION="message_bus.destination",e.DB_INSTANCE="db.instance",e.DB_STATEMENT="db.statement",e.DB_TYPE="db.type",e.DB_USER="db.user"},"./node_modules/opentracing/lib/functions.js":function(t,e,n){function r(t){return t instanceof a.default&&(t=t.context()),new s.default(i.REFERENCE_CHILD_OF,t)}function o(t){return t instanceof a.default&&(t=t.context()),new s.default(i.REFERENCE_FOLLOWS_FROM,t)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/opentracing/lib/constants.js"),s=n("./node_modules/opentracing/lib/reference.js"),a=n("./node_modules/opentracing/lib/span.js");e.childOf=r,e.followsFrom=o},"./node_modules/opentracing/lib/global_tracer.js":function(t,e,n){function r(t){c=t}function o(){return d}var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n("./node_modules/opentracing/lib/tracer.js"),a=new s.default,c=null,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.startSpan=function(){var t=c||a;return t.startSpan.apply(t,arguments)},e.prototype.inject=function(){var t=c||a;return t.inject.apply(t,arguments)},e.prototype.extract=function(){var t=c||a;return t.extract.apply(t,arguments)},e}(s.default),d=new u;e.initGlobalTracer=r,e.globalTracer=o},"./node_modules/opentracing/lib/index.js":function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/opentracing/lib/binary_carrier.js");e.BinaryCarrier=o.default;var i=n("./node_modules/opentracing/lib/ext/tags.js");e.Tags=i;var s=n("./node_modules/opentracing/lib/noop.js"),a=n("./node_modules/opentracing/lib/reference.js");e.Reference=a.default;var c=n("./node_modules/opentracing/lib/span.js");e.Span=c.default;var u=n("./node_modules/opentracing/lib/span_context.js");e.SpanContext=u.default;var d=n("./node_modules/opentracing/lib/tracer.js");e.Tracer=d.Tracer;var f=n("./node_modules/opentracing/lib/mock_tracer/index.js");e.MockTracer=f.MockTracer,r(n("./node_modules/opentracing/lib/global_tracer.js")),r(n("./node_modules/opentracing/lib/constants.js")),r(n("./node_modules/opentracing/lib/functions.js")),s.initialize()},"./node_modules/opentracing/lib/mock_tracer/index.js":function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/opentracing/lib/mock_tracer/mock_context.js");e.MockContext=r.default;var o=n("./node_modules/opentracing/lib/mock_tracer/mock_span.js");e.MockSpan=o.default;var i=n("./node_modules/opentracing/lib/mock_tracer/mock_tracer.js");e.MockTracer=i.default},"./node_modules/opentracing/lib/mock_tracer/mock_context.js":function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/opentracing/lib/span_context.js"),i=function(t){function e(e){var n=t.call(this)||this;return n._span=e,n}return r(e,t),e.prototype.span=function(){return this._span},e}(o.SpanContext);e.MockContext=i,e.default=i},"./node_modules/opentracing/lib/mock_tracer/mock_report.js":function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=this;this.spans=t,this.spansByUUID={},this.spansByTag={},this.debugSpans=[],this.unfinishedSpans=[],t.forEach(function(t){0===t._finishMs&&e.unfinishedSpans.push(t),e.spansByUUID[t.uuid()]=t,e.debugSpans.push(t.debug());var n=t.tags();Object.keys(n).forEach(function(r){var o=n[r];e.spansByTag[r]=e.spansByTag[r]||{},e.spansByTag[r][o]=e.spansByTag[r][o]||[],e.spansByTag[r][o].push(t)})})}return t.prototype.firstSpanWithTagValue=function(t,e){var n=this.spansByTag[t];if(!n)return null;var r=n[e];return r?r[0]:null},t}();e.MockReport=n,e.default=n},"./node_modules/opentracing/lib/mock_tracer/mock_span.js":function(t,e,n){
var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/opentracing/lib/index.js"),i=n("./node_modules/opentracing/lib/mock_tracer/mock_context.js"),s=function(t){function e(e){var n=t.call(this)||this;return n._mockTracer=e,n._uuid=n._generateUUID(),n._startMs=Date.now(),n._finishMs=0,n._operationName="",n._tags={},n._logs=[],n}return r(e,t),e.prototype._context=function(){return new i.default(this)},e.prototype._setOperationName=function(t){this._operationName=t},e.prototype._addTags=function(t){for(var e=Object.keys(t),n=0,r=e;n<r.length;n++){var o=r[n];this._tags[o]=t[o]}},e.prototype._log=function(t,e){this._logs.push({fields:t,timestamp:e})},e.prototype._finish=function(t){this._finishMs=t||Date.now()},e.prototype.uuid=function(){return this._uuid},e.prototype.operationName=function(){return this._operationName},e.prototype.durationMs=function(){return this._finishMs-this._startMs},e.prototype.tags=function(){return this._tags},e.prototype.tracer=function(){return this._mockTracer},e.prototype._generateUUID=function(){return""+("00000000"+Math.abs(4294967295*Math.random()|0).toString(16)).substr(-8)+("00000000"+Math.abs(4294967295*Math.random()|0).toString(16)).substr(-8)},e.prototype.addReference=function(t){},e.prototype.debug=function(){var t={uuid:this._uuid,operation:this._operationName,millis:[this._finishMs-this._startMs,this._startMs,this._finishMs]};return Object.keys(this._tags).length&&(t.tags=this._tags),t},e}(o.Span);e.MockSpan=s,e.default=s},"./node_modules/opentracing/lib/mock_tracer/mock_tracer.js":function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/opentracing/lib/index.js"),i=n("./node_modules/opentracing/lib/mock_tracer/mock_report.js"),s=n("./node_modules/opentracing/lib/mock_tracer/mock_span.js"),a=function(t){function e(){var e=t.call(this)||this;return e._spans=[],e}return r(e,t),e.prototype._startSpan=function(t,e){var n=this._allocSpan();if(n.setOperationName(t),this._spans.push(n),e.references)for(var r=0,o=e.references;r<o.length;r++){var i=o[r];n.addReference(i)}return n._startStack=(new Error).stack,n},e.prototype._inject=function(t,e,n){throw new Error("NOT YET IMPLEMENTED")},e.prototype._extract=function(t,e){throw new Error("NOT YET IMPLEMENTED")},e.prototype._allocSpan=function(){return new s.default(this)},e.prototype.clear=function(){this._spans=[]},e.prototype.report=function(){return new i.default(this._spans)},e}(o.Tracer);e.MockTracer=a,e.default=a},"./node_modules/opentracing/lib/noop.js":function(t,e,n){function r(){e.tracer=new s.default,e.span=new o.default,e.spanContext=new i.default}Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/opentracing/lib/span.js"),i=n("./node_modules/opentracing/lib/span_context.js"),s=n("./node_modules/opentracing/lib/tracer.js");e.tracer=null,e.spanContext=null,e.span=null,e.initialize=r},"./node_modules/opentracing/lib/reference.js":function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/opentracing/lib/span.js"),o=function(){function t(t,e){this._type=t,this._referencedContext=e instanceof r.default?e.context():e}return t.prototype.type=function(){return this._type},t.prototype.referencedContext=function(){return this._referencedContext},t}();e.default=o},"./node_modules/opentracing/lib/span.js":function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/opentracing/lib/noop.js"),o=function(){function t(){}return t.prototype.context=function(){return this._context()},t.prototype.tracer=function(){return this._tracer()},t.prototype.setOperationName=function(t){return this._setOperationName(t),this},t.prototype.setBaggageItem=function(t,e){return this._setBaggageItem(t,e),this},t.prototype.getBaggageItem=function(t){return this._getBaggageItem(t)},t.prototype.setTag=function(t,e){var n;return this._addTags((n={},n[t]=e,n)),this},t.prototype.addTags=function(t){return this._addTags(t),this},t.prototype.log=function(t,e){return this._log(t,e),this},t.prototype.logEvent=function(t,e){return this._log({event:t,payload:e})},t.prototype.finish=function(t){this._finish(t)},t.prototype._context=function(){return r.spanContext},t.prototype._tracer=function(){return r.tracer},t.prototype._setOperationName=function(t){},t.prototype._setBaggageItem=function(t,e){},t.prototype._getBaggageItem=function(t){},t.prototype._addTags=function(t){},t.prototype._log=function(t,e){},t.prototype._finish=function(t){},t}();e.Span=o,e.default=o},"./node_modules/opentracing/lib/span_context.js":function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.toTraceId=function(){return""},t.prototype.toSpanId=function(){return""},t}();e.SpanContext=n,e.default=n},"./node_modules/opentracing/lib/tracer.js":function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/opentracing/lib/functions.js"),o=n("./node_modules/opentracing/lib/noop.js"),i=n("./node_modules/opentracing/lib/span.js"),s=function(){function t(){}return t.prototype.startSpan=function(t,e){if(void 0===e&&(e={}),e.childOf){var n=r.childOf(e.childOf);e.references?e.references.push(n):e.references=[n],delete e.childOf}return this._startSpan(t,e)},t.prototype.inject=function(t,e,n){return t instanceof i.default&&(t=t.context()),this._inject(t,e,n)},t.prototype.extract=function(t,e){return this._extract(t,e)},t.prototype._startSpan=function(t,e){return o.span},t.prototype._inject=function(t,e,n){},t.prototype._extract=function(t,e){return o.spanContext},t}();e.Tracer=s,e.default=s},"./node_modules/sdc-site-open-tracing/src/components/open-tracing-wrapper.js":function(t,e,n){n.r(e);var r=n("./node_modules/opentracing/lib/index.js");e.default=function(t){return{spans:[],startSpan:function(e,n,r){var o=window.sdc.openTracing.spans[e]||t.startSpan(n);return o&&r&&o.addTags(r),o&&(window.sdc.openTracing.spans[e]=o),o},tagSpan:function(t,e){var n=window.sdc.openTracing.spans[t];if(n)return n.addTags(e),n},addLogToSpan:function(t,e){var n=window.sdc.openTracing.spans[t];if(n)return n.log(e),n},finishSpan:function(t){var e=window.sdc.openTracing.spans[t];e&&(e.finish(),delete window.sdc.openTracing.spans[t])},sendError:function(e,n){if(!(n&&n instanceof Error))return!1;var o=window.sdc.openTracing.spans[e]||t.startSpan(e);o&&(o.setTag(r.Tags.ERROR,!0),o.log({error:n,event:"error","error.object":n,message:n.message,stack:n.stack}),o.finish(),delete window.sdc.openTracing.spans[e])},hasSpan:function(t){return t in window.sdc.openTracing.spans}}}},"./node_modules/sdc-site-open-tracing/src/components/pub-sub-subscribe.js":function(t,e,n){function r(t){t.subscribe("sdcOpenTracing::trace",function(t){var e=t.name,n=t.error,r=t.tags;if(e)return window.sdc.openTracing.hasSpan(e)&&r&&window.sdc.openTracing.tagSpan(e,r),n?void window.sdc.openTracing.sendError(e,n):window.sdc.openTracing.hasSpan(e)?void window.sdc.openTracing.finishSpan(e):void window.sdc.openTracing.startSpan(e,e,r||null)})}n.r(e),n.d(e,{default:function(){return r}})},"./node_modules/sdc-site-open-tracing/src/tracers/elastic/elastic.js":function(t,e,n){n.r(e);var r=n("./node_modules/@elastic/apm-rum/dist/bundles/elastic-apm-opentracing.umd.js");e.default=function(t){var e=parseFloat(t.sampleRatePercentage)/100,n={pageLoadTransactionName:t.pageLoadTransactionName||window.location.pathname,active:Math.random()<e},o=Object.assign({},t,n),i=(0,r.init)(o);return(0,r.createTracer)(i)}},"./node_modules/sdc-site-open-tracing/src/tracers/index.js":function(t,e,n){n.r(e),n.d(e,{elastic:function(){return r.default}});var r=n("./node_modules/sdc-site-open-tracing/src/tracers/elastic/elastic.js")}},n={};!function(){t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}}(),function(){t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){t.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}();var r={};return function(){"use strict";function e(t){if(t){var e=t.dataset.provider;if(!e||!o[e]){var r="No tracer found for provider ".concat(e);return void console.error(r)}var a=o[e],c=a(t.dataset);n.initGlobalTracer(c),window.sdc=window.sdc||{},window.sdc.openTracing=(0,i.default)(n.globalTracer());var u=window.sdc&&window.sdc.pubSub;u&&(0,s.default)(u)}}t.r(r),t.d(r,{default:function(){return e}});var n=t("./node_modules/opentracing/lib/index.js"),o=t("./node_modules/sdc-site-open-tracing/src/tracers/index.js"),i=t("./node_modules/sdc-site-open-tracing/src/components/open-tracing-wrapper.js"),s=t("./node_modules/sdc-site-open-tracing/src/components/pub-sub-subscribe.js")}(),r}()});
//# sourceMappingURL=sdc-site-open-tracing.js.map